
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A structured meta-repository for learning systems engineering, embedded Linux, and infrastructure automation">
      
      
        <meta name="author" content="Jofralso">
      
      
        <link rel="canonical" href="https://jofralso.github.io/hitchhikers-guide-to-developing/labs/debugging/lab21-strace-ltrace/">
      
      
        <link rel="prev" href="../lab20-gdb-debugging/">
      
      
        <link rel="next" href="../lab22-valgrind/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Lab 21 - strace/ltrace - The Hitchhiker's Guide to Developing</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lab-21-system-call-and-library-tracing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="The Hitchhiker&#39;s Guide to Developing" class="md-header__button md-logo" aria-label="The Hitchhiker's Guide to Developing" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            The Hitchhiker's Guide to Developing
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Lab 21 - strace/ltrace
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="deep-orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Jofralso/hitchhikers-guide-to-developing" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Jofralso/hitchhikers-guide-to-developing
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../QUICK_START/" class="md-tabs__link">
          
  
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../embedded-linux/" class="md-tabs__link">
          
  
  
  Labs

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../THE-JOURNEY/" class="md-tabs__link">
        
  
  
    
  
  The Journey

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../ROADMAP/" class="md-tabs__link">
        
  
  
    
  
  Roadmap

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../ARCHITECTURE/" class="md-tabs__link">
        
  
  
    
  
  Architecture

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../BIBLIOGRAPHY/" class="md-tabs__link">
        
  
  
    
  
  Bibliography

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../submodules/index.md" class="md-tabs__link">
          
  
  
  Submodules

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../templates/lab-template/" class="md-tabs__link">
          
  
  
  Templates

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../standards/documentation-standards/" class="md-tabs__link">
          
  
  
  Standards

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../CONTRIBUTING/" class="md-tabs__link">
        
  
  
    
  
  Contributing

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="The Hitchhiker&#39;s Guide to Developing" class="md-nav__button md-logo" aria-label="The Hitchhiker's Guide to Developing" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    The Hitchhiker's Guide to Developing
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Jofralso/hitchhikers-guide-to-developing" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Jofralso/hitchhikers-guide-to-developing
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../QUICK_START/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Start
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../BEAGLEPLAY_SETUP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    BeaglePlay Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../LAB_STRUCTURE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab Structure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Labs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Labs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Embedded Linux
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Embedded Linux
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../embedded-linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../embedded-linux/lab01-toolchain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 1 - Toolchain
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../embedded-linux/lab02-hardware/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 2 - Hardware Discovery
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../embedded-linux/lab03-bootloader/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 3 - U-Boot Bootloader
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../embedded-linux/lab04-kernel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 4 - Linux Kernel
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../embedded-linux/lab05-rootfs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 5 - Root Filesystem
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../embedded-linux/lab06-hardware/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 6 - Hardware Devices
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../embedded-linux/lab07-block-filesystems/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 7 - Block Filesystems
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../embedded-linux/lab08-buildroot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 8 - Buildroot
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../embedded-linux/lab09-application-development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 9 - App Development
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Yocto Project
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Yocto Project
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab10-yocto-first-build/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 10 - First Yocto Build
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab11-yocto-advanced-config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 11 - Advanced Config
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab12-yocto-custom-app/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 12 - Custom Application
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab13-yocto-custom-layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 13 - Custom Layer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab14-yocto-extend-recipe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 14 - Extend Recipe
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab15-yocto-custom-machine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 15 - Custom Machine
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab16-yocto-custom-image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 16 - Custom Image
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab17-yocto-app-development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 17 - SDK Development
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab18-yocto-devtool/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 18 - Devtool
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Debugging
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Debugging
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab19-system-monitoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 19 - System Monitoring
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab20-gdb-debugging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 20 - GDB Debugging
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Lab 21 - strace/ltrace
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 21 - strace/ltrace
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dont-panic" class="md-nav__link">
    <span class="md-ellipsis">
      
        DON'T PANIC
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#objectives" class="md-nav__link">
    <span class="md-ellipsis">
      
        Objectives
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-introduction-to-strace" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Introduction to strace
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Introduction to strace">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-what-is-strace" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.1 What is strace?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-basic-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.2 Basic Usage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-install-strace" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.3 Install strace
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-strace-command-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. strace Command Options
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. strace Command Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-filter-specific-system-calls" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Filter Specific System Calls
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-output-formatting" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 Output Formatting
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-attach-to-running-process" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3 Attach to Running Process
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-follow-child-processes" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.4 Follow Child Processes
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-practical-strace-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Practical strace Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Practical strace Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-debug-file-not-found" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Debug File Not Found
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-diagnose-permission-issues" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Diagnose Permission Issues
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-identify-slow-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3 Identify Slow Operations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-trace-network-activity" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4 Trace Network Activity
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-introduction-to-ltrace" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Introduction to ltrace
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Introduction to ltrace">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-what-is-ltrace" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1 What is ltrace?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-basic-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2 Basic Usage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-filter-library-calls" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3 Filter Library Calls
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-practical-ltrace-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Practical ltrace Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Practical ltrace Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-find-memory-leaks" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 Find Memory Leaks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-trace-string-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2 Trace String Operations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-debug-library-loading" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3 Debug Library Loading
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-combining-strace-and-ltrace" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Combining strace and ltrace
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Combining strace and ltrace">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-trace-both-system-and-library-calls" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 Trace Both System and Library Calls
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-correlate-by-timestamp" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.2 Correlate by Timestamp
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-advanced-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Advanced Usage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Advanced Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-save-trace-to-file" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1 Save Trace to File
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-trace-specific-file-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2 Trace Specific File Operations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-decode-socket-addresses" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.3 Decode Socket Addresses
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-performance-profiling-with-strace" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Performance Profiling with strace
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. Performance Profiling with strace">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81-identify-slow-system-calls" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1 Identify Slow System Calls
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82-find-excessive-syscalls" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.2 Find Excessive Syscalls
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-real-world-debugging-scenarios" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. Real-World Debugging Scenarios
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9. Real-World Debugging Scenarios">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#91-application-hangs" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.1 Application Hangs
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#92-high-cpu-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.2 High CPU Usage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#93-file-access-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.3 File Access Patterns
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-troubleshooting-tips" class="md-nav__link">
    <span class="md-ellipsis">
      
        10. Troubleshooting Tips
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10. Troubleshooting Tips">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#101-permission-denied" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.1 Permission Denied
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#102-too-much-output" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.2 Too Much Output
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#103-decode-binary-data" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3 Decode Binary Data
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-example-debug-failed-service-start" class="md-nav__link">
    <span class="md-ellipsis">
      
        11. Example: Debug Failed Service Start
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#12-key-takeaways" class="md-nav__link">
    <span class="md-ellipsis">
      
        12. Key Takeaways
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#13-verification-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      
        13. Verification Checklist
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab22-valgrind/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 22 - Valgrind
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab23-perf-ftrace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 23 - perf & ftrace
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab24-ebpf-bcc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 24 - eBPF & BCC
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab25-kernel-debugging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 25 - Kernel Debugging
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab26-kdump-kexec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 26 - kdump & kexec
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../THE-JOURNEY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    The Journey
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ROADMAP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Roadmap
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ARCHITECTURE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../BIBLIOGRAPHY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bibliography
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Submodules
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Submodules
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../submodules/index.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Templates
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Templates
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../templates/lab-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab Template
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../templates/research-note/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Research Note
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../templates/technical-procedure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Technical Procedure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Standards
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Standards
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../standards/documentation-standards/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documentation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CONTRIBUTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dont-panic" class="md-nav__link">
    <span class="md-ellipsis">
      
        DON'T PANIC
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#objectives" class="md-nav__link">
    <span class="md-ellipsis">
      
        Objectives
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-introduction-to-strace" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Introduction to strace
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Introduction to strace">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-what-is-strace" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.1 What is strace?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-basic-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.2 Basic Usage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-install-strace" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.3 Install strace
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-strace-command-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. strace Command Options
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. strace Command Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-filter-specific-system-calls" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Filter Specific System Calls
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-output-formatting" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 Output Formatting
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-attach-to-running-process" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3 Attach to Running Process
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-follow-child-processes" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.4 Follow Child Processes
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-practical-strace-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Practical strace Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Practical strace Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-debug-file-not-found" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Debug File Not Found
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-diagnose-permission-issues" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Diagnose Permission Issues
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-identify-slow-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3 Identify Slow Operations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-trace-network-activity" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.4 Trace Network Activity
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-introduction-to-ltrace" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Introduction to ltrace
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Introduction to ltrace">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-what-is-ltrace" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1 What is ltrace?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-basic-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2 Basic Usage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-filter-library-calls" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3 Filter Library Calls
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-practical-ltrace-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Practical ltrace Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Practical ltrace Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-find-memory-leaks" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 Find Memory Leaks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-trace-string-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2 Trace String Operations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-debug-library-loading" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3 Debug Library Loading
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-combining-strace-and-ltrace" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Combining strace and ltrace
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Combining strace and ltrace">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-trace-both-system-and-library-calls" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 Trace Both System and Library Calls
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-correlate-by-timestamp" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.2 Correlate by Timestamp
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-advanced-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Advanced Usage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Advanced Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-save-trace-to-file" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1 Save Trace to File
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-trace-specific-file-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2 Trace Specific File Operations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-decode-socket-addresses" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.3 Decode Socket Addresses
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-performance-profiling-with-strace" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Performance Profiling with strace
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. Performance Profiling with strace">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81-identify-slow-system-calls" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1 Identify Slow System Calls
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82-find-excessive-syscalls" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.2 Find Excessive Syscalls
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-real-world-debugging-scenarios" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. Real-World Debugging Scenarios
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9. Real-World Debugging Scenarios">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#91-application-hangs" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.1 Application Hangs
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#92-high-cpu-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.2 High CPU Usage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#93-file-access-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.3 File Access Patterns
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-troubleshooting-tips" class="md-nav__link">
    <span class="md-ellipsis">
      
        10. Troubleshooting Tips
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10. Troubleshooting Tips">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#101-permission-denied" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.1 Permission Denied
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#102-too-much-output" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.2 Too Much Output
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#103-decode-binary-data" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.3 Decode Binary Data
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-example-debug-failed-service-start" class="md-nav__link">
    <span class="md-ellipsis">
      
        11. Example: Debug Failed Service Start
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#12-key-takeaways" class="md-nav__link">
    <span class="md-ellipsis">
      
        12. Key Takeaways
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#13-verification-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      
        13. Verification Checklist
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="lab-21-system-call-and-library-tracing">Lab 21: System Call and Library Tracing<a class="headerlink" href="#lab-21-system-call-and-library-tracing" title="Permanent link">&para;</a></h1>
<h2 id="dont-panic">DON'T PANIC<a class="headerlink" href="#dont-panic" title="Permanent link">&para;</a></h2>
<p>The Hitchhiker's Guide to Embedded Linux has this to say about debugging:</p>
<p><em>"Debugging is the art of figuring out why your code doesn't work, as opposed to why you thought it would work. This is similar to the difference between what Deep Thought calculated (42) and what everyone expected (a useful answer). Both are technically correct, but only one is helpful."</em></p>
<h2 id="objectives">Objectives<a class="headerlink" href="#objectives" title="Permanent link">&para;</a></h2>
<p>Master <code>strace</code> and <code>ltrace</code> to understand how programs interact with the kernel and libraries, essential for diagnosing system-level issues and performance problems.</p>
<p><strong>What You'll Learn:</strong>
- Trace system calls with <code>strace</code>
- Analyze library function calls with <code>ltrace</code>
- Filter and format trace output
- Identify performance bottlenecks
- Debug file access and permission issues
- Understand process behavior</p>
<p><strong>Time Required:</strong> 2-3 hours (or approximately 42 minutes in improbable circumstances)</p>
<hr />
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<p><strong>Hardware:</strong>
- BeaglePlay board
- Development workstation
- Network connection</p>
<p><strong>Software:</strong>
- strace and ltrace installed
- Sample applications to trace</p>
<hr />
<h2 id="1-introduction-to-strace">1. Introduction to strace<a class="headerlink" href="#1-introduction-to-strace" title="Permanent link">&para;</a></h2>
<h3 id="11-what-is-strace">1.1 What is strace?<a class="headerlink" href="#11-what-is-strace" title="Permanent link">&para;</a></h3>
<p><strong><code>strace</code></strong> intercepts and records system calls made by a process.</p>
<p><strong>System calls</strong> are the interface between user programs and the kernel:
- <code>open()</code>, <code>read()</code>, <code>write()</code>, <code>close()</code> - File I/O
- <code>fork()</code>, <code>execve()</code>, <code>wait()</code> - Process management
- <code>socket()</code>, <code>connect()</code>, <code>send()</code> - Networking
- <code>mmap()</code>, <code>brk()</code> - Memory management</p>
<h3 id="12-basic-usage">1.2 Basic Usage<a class="headerlink" href="#12-basic-usage" title="Permanent link">&para;</a></h3>
<p><strong>Trace simple command:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>strace<span class="w"> </span>ls<span class="w"> </span>/tmp
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>execve(&quot;/usr/bin/ls&quot;, [&quot;ls&quot;, &quot;/tmp&quot;], 0xfffffffff8 /* 12 vars */) = 0
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>brk(NULL)                               = 0xaaaaaaaa8000
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xfffff7ff0000
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>openat(AT_FDCWD, &quot;/tmp&quot;, O_RDONLY|O_NONBLOCK|O_CLOEXEC|O_DIRECTORY) = 3
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>getdents64(3, /* 5 entries */, 32768)   = 160
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>write(1, &quot;file1\nfile2\nfile3\n&quot;, 18)   = 18
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>close(3)                                = 0
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>exit_group(0)                           = ?
</code></pre></div></p>
<p><strong>Format:</strong> <code>syscall(args) = return_value</code></p>
<h3 id="13-install-strace">1.3 Install strace<a class="headerlink" href="#13-install-strace" title="Permanent link">&para;</a></h3>
<p><strong>On BeaglePlay:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># Using opkg (Buildroot)</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>opkg<span class="w"> </span>install<span class="w"> </span>strace
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="c1"># Using apt (Debian-based)</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>apt-get<span class="w"> </span>install<span class="w"> </span>strace
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="c1"># Using Yocto, add to image:</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>IMAGE_INSTALL:append<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot; strace&quot;</span>
</code></pre></div></p>
<hr />
<h2 id="2-strace-command-options">2. strace Command Options<a class="headerlink" href="#2-strace-command-options" title="Permanent link">&para;</a></h2>
<h3 id="21-filter-specific-system-calls">2.1 Filter Specific System Calls<a class="headerlink" href="#21-filter-specific-system-calls" title="Permanent link">&para;</a></h3>
<p><strong>Trace only file operations:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>strace<span class="w"> </span>-e<span class="w"> </span><span class="nv">trace</span><span class="o">=</span>open,openat,read,write,close<span class="w"> </span>cat<span class="w"> </span>/etc/hostname
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>openat(AT_FDCWD, &quot;/etc/hostname&quot;, O_RDONLY) = 3
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>read(3, &quot;beagleplay\n&quot;, 131072)         = 11
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>write(1, &quot;beagleplay\n&quot;, 11)            = 11
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>close(3)                                = 0
</code></pre></div></p>
<p><strong>Trace only network calls:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>strace<span class="w"> </span>-e<span class="w"> </span><span class="nv">trace</span><span class="o">=</span>network<span class="w"> </span>nc<span class="w"> </span>-l<span class="w"> </span><span class="m">8080</span>
</code></pre></div></p>
<p><strong>Categories:</strong>
- <code>file</code>: File operations
- <code>process</code>: fork, exec, wait
- <code>network</code>: socket, connect, send, recv
- <code>signal</code>: kill, sigaction
- <code>memory</code>: mmap, brk, mprotect</p>
<h3 id="22-output-formatting">2.2 Output Formatting<a class="headerlink" href="#22-output-formatting" title="Permanent link">&para;</a></h3>
<p><strong>Show timestamps:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>strace<span class="w"> </span>-t<span class="w"> </span>ls
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="c1"># -t: Time of day</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="c1"># -tt: Time with microseconds</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="c1"># -ttt: Unix timestamp</span>
</code></pre></div></p>
<p><strong>Show time spent in each syscall:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>strace<span class="w"> </span>-T<span class="w"> </span>ls
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>openat(AT_FDCWD, &quot;/tmp&quot;, O_RDONLY) = 3 &lt;0.000045&gt;
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a># &lt;0.000045&gt; = 45 microseconds
</code></pre></div></p>
<p><strong>Count syscall statistics:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>strace<span class="w"> </span>-c<span class="w"> </span>ls<span class="w"> </span>/tmp
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>% time     seconds  usecs/call     calls    errors syscall
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>------ ----------- ----------- --------- --------- ----------------
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a> 45.23    0.000543          54        10           mmap
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a> 21.34    0.000256          64         4           openat
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a> 12.45    0.000149          37         4           read
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a> ...
</code></pre></div></p>
<h3 id="23-attach-to-running-process">2.3 Attach to Running Process<a class="headerlink" href="#23-attach-to-running-process" title="Permanent link">&para;</a></h3>
<p><strong>Find PID:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>ps<span class="w"> </span>aux<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>my-app
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="c1"># root  567  0.5  1.2  ...  my-app</span>
</code></pre></div></p>
<p><strong>Attach strace:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>strace<span class="w"> </span>-p<span class="w"> </span><span class="m">567</span>
</code></pre></div></p>
<p><strong>Detach:</strong> Press <code>Ctrl+C</code></p>
<h3 id="24-follow-child-processes">2.4 Follow Child Processes<a class="headerlink" href="#24-follow-child-processes" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>strace<span class="w"> </span>-f<span class="w"> </span>-e<span class="w"> </span><span class="nv">trace</span><span class="o">=</span>process<span class="w"> </span>./parent-app
</code></pre></div>
<p><strong><code>-f</code></strong>: Follow forks and child processes</p>
<hr />
<h2 id="3-practical-strace-examples">3. Practical strace Examples<a class="headerlink" href="#3-practical-strace-examples" title="Permanent link">&para;</a></h2>
<h3 id="31-debug-file-not-found">3.1 Debug File Not Found<a class="headerlink" href="#31-debug-file-not-found" title="Permanent link">&para;</a></h3>
<p><strong>Program fails to open file:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>strace<span class="w"> </span>-e<span class="w"> </span><span class="nv">trace</span><span class="o">=</span>open,openat,stat<span class="w"> </span>./my-app
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>openat(AT_FDCWD, &quot;/etc/config.conf&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>openat(AT_FDCWD, &quot;/usr/local/etc/config.conf&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>openat(AT_FDCWD, &quot;/home/root/.config.conf&quot;, O_RDONLY) = 3
</code></pre></div></p>
<p><strong>Shows search path</strong> until file found.</p>
<h3 id="32-diagnose-permission-issues">3.2 Diagnose Permission Issues<a class="headerlink" href="#32-diagnose-permission-issues" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>strace<span class="w"> </span>-e<span class="w"> </span><span class="nv">trace</span><span class="o">=</span>open,access<span class="w"> </span>./my-app<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>EACCES
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>openat(AT_FDCWD, &quot;/dev/i2c-1&quot;, O_RDWR) = -1 EACCES (Permission denied)
</code></pre></div></p>
<p><strong>Solution:</strong> Add user to <code>i2c</code> group or run as root.</p>
<h3 id="33-identify-slow-operations">3.3 Identify Slow Operations<a class="headerlink" href="#33-identify-slow-operations" title="Permanent link">&para;</a></h3>
<p><strong>Trace with timing:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>strace<span class="w"> </span>-T<span class="w"> </span>-e<span class="w"> </span><span class="nv">trace</span><span class="o">=</span>read,write<span class="w"> </span>./slow-app
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>read(3, &quot;...&quot;, 4096) = 4096 &lt;0.000023&gt;
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>read(3, &quot;...&quot;, 4096) = 4096 &lt;2.345678&gt;  # Slow read!
</code></pre></div></p>
<p><strong>2.3 seconds</strong> = likely waiting for network/disk.</p>
<h3 id="34-trace-network-activity">3.4 Trace Network Activity<a class="headerlink" href="#34-trace-network-activity" title="Permanent link">&para;</a></h3>
<p><strong>Create test client:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>strace<span class="w"> </span>-e<span class="w"> </span><span class="nv">trace</span><span class="o">=</span>network<span class="w"> </span>curl<span class="w"> </span>http://192.168.0.1
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>socket(AF_INET, SOCK_STREAM, IPPROTO_TCP) = 3
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>connect(3, {sa_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr(&quot;192.168.0.1&quot;)}, 16) = 0
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>sendto(3, &quot;GET / HTTP/1.1\r\nHost: 192.168.0.1\r\n...&quot;, 78, MSG_NOSIGNAL, NULL, 0) = 78
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>recvfrom(3, &quot;HTTP/1.1 200 OK\r\n...&quot;, 16384, 0, NULL, NULL) = 512
</code></pre></div></p>
<hr />
<h2 id="4-introduction-to-ltrace">4. Introduction to ltrace<a class="headerlink" href="#4-introduction-to-ltrace" title="Permanent link">&para;</a></h2>
<h3 id="41-what-is-ltrace">4.1 What is ltrace?<a class="headerlink" href="#41-what-is-ltrace" title="Permanent link">&para;</a></h3>
<p><strong><code>ltrace</code></strong> intercepts library function calls (libc, etc.).</p>
<p><strong>Difference from strace:</strong>
- <strong>strace</strong>: System calls (kernel interface)
- <strong>ltrace</strong>: Library calls (user-space functions)</p>
<h3 id="42-basic-usage">4.2 Basic Usage<a class="headerlink" href="#42-basic-usage" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>ltrace<span class="w"> </span>ls<span class="w"> </span>/tmp
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>__libc_start_main(0xaaaaaaaa1234, 2, 0xfffffffff8, ...
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>strcmp(&quot;ls&quot;, &quot;ls&quot;)                      = 0
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>malloc(1024)                            = 0xaaaaaaaa8000
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>opendir(&quot;/tmp&quot;)                         = 0xaaaaaaaa8100
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>readdir(0xaaaaaaaa8100)                 = { d_name = &quot;file1&quot; }
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>printf(&quot;%s\n&quot;, &quot;file1&quot;)                 = 6
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>free(0xaaaaaaaa8000)                    = &lt;void&gt;
</code></pre></div></p>
<h3 id="43-filter-library-calls">4.3 Filter Library Calls<a class="headerlink" href="#43-filter-library-calls" title="Permanent link">&para;</a></h3>
<p><strong>Trace only malloc/free:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>ltrace<span class="w"> </span>-e<span class="w"> </span>malloc,free<span class="w"> </span>./my-app
</code></pre></div></p>
<p><strong>Trace only string functions:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>ltrace<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;strcmp*&#39;</span><span class="w"> </span>./my-app
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="c1"># Matches strcmp, strcpy, strlen, etc.</span>
</code></pre></div></p>
<hr />
<h2 id="5-practical-ltrace-examples">5. Practical ltrace Examples<a class="headerlink" href="#5-practical-ltrace-examples" title="Permanent link">&para;</a></h2>
<h3 id="51-find-memory-leaks">5.1 Find Memory Leaks<a class="headerlink" href="#51-find-memory-leaks" title="Permanent link">&para;</a></h3>
<p><strong>Create <code>leak.c</code>:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string.h&gt;</span>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="w">        </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="mi">1024</span><span class="p">);</span>
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="w">        </span><span class="n">strcpy</span><span class="p">(</span><span class="n">ptr</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Leaked memory&quot;</span><span class="p">);</span>
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="w">        </span><span class="c1">// Missing free(ptr)!</span>
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a><span class="p">}</span>
</code></pre></div></p>
<p><strong>Compile and trace:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>aarch64-linux-gnu-gcc<span class="w"> </span>-o<span class="w"> </span>leak<span class="w"> </span>leak.c
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>ltrace<span class="w"> </span>-e<span class="w"> </span>malloc,free<span class="w"> </span>./leak
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>malloc(1024) = 0xaaaaaaaa8000
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>malloc(1024) = 0xaaaaaaaa8400
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>malloc(1024) = 0xaaaaaaaa8800
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>...
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a># 100 malloc() calls, 0 free() calls!
</code></pre></div></p>
<h3 id="52-trace-string-operations">5.2 Trace String Operations<a class="headerlink" href="#52-trace-string-operations" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>ltrace<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;str*&#39;</span><span class="w"> </span>./my-app
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>strlen(&quot;Hello World&quot;) = 11
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>strcmp(&quot;user&quot;, &quot;root&quot;) = 1
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>strcpy(0xfffffffff0, &quot;config.txt&quot;) = 0xfffffffff0
</code></pre></div></p>
<h3 id="53-debug-library-loading">5.3 Debug Library Loading<a class="headerlink" href="#53-debug-library-loading" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>ltrace<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;dlopen*&#39;</span><span class="w"> </span>./my-app
</code></pre></div>
<p><strong>Shows dynamic library loading.</strong></p>
<hr />
<h2 id="6-combining-strace-and-ltrace">6. Combining strace and ltrace<a class="headerlink" href="#6-combining-strace-and-ltrace" title="Permanent link">&para;</a></h2>
<h3 id="61-trace-both-system-and-library-calls">6.1 Trace Both System and Library Calls<a class="headerlink" href="#61-trace-both-system-and-library-calls" title="Permanent link">&para;</a></h3>
<p><strong>Terminal 1 - strace:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>strace<span class="w"> </span>-o<span class="w"> </span>strace.log<span class="w"> </span>-tt<span class="w"> </span>./my-app
</code></pre></div></p>
<p><strong>Terminal 2 - ltrace:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>ltrace<span class="w"> </span>-o<span class="w"> </span>ltrace.log<span class="w"> </span>-tt<span class="w"> </span>./my-app
</code></pre></div></p>
<p><strong>Analyze together:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="c1"># System calls</span>
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>grep<span class="w"> </span><span class="s2">&quot;open\|read\|write&quot;</span><span class="w"> </span>strace.log
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a>
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="c1"># Library calls</span>
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a>grep<span class="w"> </span><span class="s2">&quot;malloc\|free\|strcmp&quot;</span><span class="w"> </span>ltrace.log
</code></pre></div></p>
<h3 id="62-correlate-by-timestamp">6.2 Correlate by Timestamp<a class="headerlink" href="#62-correlate-by-timestamp" title="Permanent link">&para;</a></h3>
<p><strong>Both logs have timestamps (<code>-tt</code>)</strong>, can merge chronologically.</p>
<hr />
<h2 id="7-advanced-usage">7. Advanced Usage<a class="headerlink" href="#7-advanced-usage" title="Permanent link">&para;</a></h2>
<h3 id="71-save-trace-to-file">7.1 Save Trace to File<a class="headerlink" href="#71-save-trace-to-file" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>strace<span class="w"> </span>-o<span class="w"> </span>trace.log<span class="w"> </span>-ff<span class="w"> </span>-tt<span class="w"> </span>./my-app
</code></pre></div>
<p><strong>Options:</strong>
- <code>-o file</code>: Output to file
- <code>-ff</code>: Separate file per process (trace.log.PID)
- <code>-tt</code>: Microsecond timestamps</p>
<h3 id="72-trace-specific-file-operations">7.2 Trace Specific File Operations<a class="headerlink" href="#72-trace-specific-file-operations" title="Permanent link">&para;</a></h3>
<p><strong>Track all accesses to specific file:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>strace<span class="w"> </span>-e<span class="w"> </span><span class="nv">trace</span><span class="o">=</span>file<span class="w"> </span>-e<span class="w"> </span>open<span class="w"> </span>--trace<span class="o">=</span>/etc/passwd<span class="w"> </span>./my-app
</code></pre></div></p>
<p><strong>Only shows operations on <code>/etc/passwd</code>.</strong></p>
<h3 id="73-decode-socket-addresses">7.3 Decode Socket Addresses<a class="headerlink" href="#73-decode-socket-addresses" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>strace<span class="w"> </span>-yy<span class="w"> </span>-e<span class="w"> </span><span class="nv">trace</span><span class="o">=</span>network<span class="w"> </span>./network-app
</code></pre></div>
<p><strong><code>-yy</code></strong>: Show file descriptor paths and IP addresses</p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>socket(AF_INET, SOCK_STREAM, IPPROTO_TCP) = 3&lt;TCP:[192.168.0.100:54321-&gt;192.168.0.1:80]&gt;
</code></pre></div></p>
<hr />
<h2 id="8-performance-profiling-with-strace">8. Performance Profiling with strace<a class="headerlink" href="#8-performance-profiling-with-strace" title="Permanent link">&para;</a></h2>
<h3 id="81-identify-slow-system-calls">8.1 Identify Slow System Calls<a class="headerlink" href="#81-identify-slow-system-calls" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>strace<span class="w"> </span>-c<span class="w"> </span>-S<span class="w"> </span><span class="nb">time</span><span class="w"> </span>./my-app
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>% time     seconds  usecs/call     calls    errors syscall
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a>------ ----------- ----------- --------- --------- ----------------
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a> 85.23    2.345678      234567        10           read
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a>  8.45    0.232145       11607        20           write
<a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a>  3.12    0.085632        4281        20           mmap
</code></pre></div></p>
<p><strong>85% of time</strong> spent in <code>read()</code> syscalls.</p>
<h3 id="82-find-excessive-syscalls">8.2 Find Excessive Syscalls<a class="headerlink" href="#82-find-excessive-syscalls" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>strace<span class="w"> </span>-c<span class="w"> </span>./my-app
</code></pre></div>
<p><strong>Look for:</strong>
- <strong>High call count</strong>: Inefficient loops
- <strong>High error count</strong>: Repeated failures</p>
<hr />
<h2 id="9-real-world-debugging-scenarios">9. Real-World Debugging Scenarios<a class="headerlink" href="#9-real-world-debugging-scenarios" title="Permanent link">&para;</a></h2>
<h3 id="91-application-hangs">9.1 Application Hangs<a class="headerlink" href="#91-application-hangs" title="Permanent link">&para;</a></h3>
<p><strong>Symptoms:</strong> Program stops responding.</p>
<p><strong>Debug:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="c1"># Find PID</span>
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>ps<span class="w"> </span>aux<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>my-app
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="c1"># Attach strace</span>
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a>strace<span class="w"> </span>-p<span class="w"> </span><span class="m">567</span>
</code></pre></div></p>
<p><strong>Possible outputs:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a># Stuck in read() - waiting for input
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>read(3, 
<a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a>
<a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a># Stuck in futex - deadlock
<a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a>futex(0xaaaaaaaa8000, FUTEX_WAIT_PRIVATE, 0, NULL
<a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a>
<a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a># Stuck in nanosleep - sleeping
<a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a>nanosleep({tv_sec=1000000, tv_nsec=0},
</code></pre></div></p>
<h3 id="92-high-cpu-usage">9.2 High CPU Usage<a class="headerlink" href="#92-high-cpu-usage" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>strace<span class="w"> </span>-c<span class="w"> </span>-p<span class="w"> </span><span class="m">567</span>
</code></pre></div>
<p><strong>Check for:</strong>
- Tight loops with millions of syscalls
- Repeated failed syscalls (e.g., <code>ENOENT</code>)</p>
<h3 id="93-file-access-patterns">9.3 File Access Patterns<a class="headerlink" href="#93-file-access-patterns" title="Permanent link">&para;</a></h3>
<p><strong>Find all files accessed:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>strace<span class="w"> </span>-e<span class="w"> </span><span class="nv">trace</span><span class="o">=</span>open,openat<span class="w"> </span>./my-app<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-o<span class="w"> </span><span class="s1">&#39;&quot;/[^&quot;]*&quot;&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-u
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>&quot;/dev/null&quot;
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a>&quot;/etc/ld.so.cache&quot;
<a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a>&quot;/etc/passwd&quot;
<a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a>&quot;/lib/libc.so.6&quot;
<a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a>&quot;/tmp/config.conf&quot;
</code></pre></div></p>
<hr />
<h2 id="10-troubleshooting-tips">10. Troubleshooting Tips<a class="headerlink" href="#10-troubleshooting-tips" title="Permanent link">&para;</a></h2>
<h3 id="101-permission-denied">10.1 Permission Denied<a class="headerlink" href="#101-permission-denied" title="Permanent link">&para;</a></h3>
<p><strong>strace needs permissions:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="c1"># Run as root</span>
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>sudo<span class="w"> </span>strace<span class="w"> </span>-p<span class="w"> </span><span class="m">567</span>
<a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a>
<a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a><span class="c1"># Or allow ptrace for your user</span>
<a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a><span class="nb">echo</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>&gt;<span class="w"> </span>/proc/sys/kernel/yama/ptrace_scope
</code></pre></div></p>
<h3 id="102-too-much-output">10.2 Too Much Output<a class="headerlink" href="#102-too-much-output" title="Permanent link">&para;</a></h3>
<p><strong>Limit output:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="c1"># Only first 1000 lines</span>
<a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a>strace<span class="w"> </span>./my-app<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-1000
<a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a>
<a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a><span class="c1"># Only errors</span>
<a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a>strace<span class="w"> </span>-e<span class="w"> </span><span class="nv">trace</span><span class="o">=</span>open<span class="w"> </span>./my-app<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-v<span class="w"> </span><span class="s2">&quot;= 3&quot;</span>
</code></pre></div></p>
<h3 id="103-decode-binary-data">10.3 Decode Binary Data<a class="headerlink" href="#103-decode-binary-data" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="c1"># Show hex and ASCII for read/write</span>
<a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a>strace<span class="w"> </span>-s<span class="w"> </span><span class="m">1024</span><span class="w"> </span>-x<span class="w"> </span>./my-app
</code></pre></div>
<hr />
<h2 id="11-example-debug-failed-service-start">11. Example: Debug Failed Service Start<a class="headerlink" href="#11-example-debug-failed-service-start" title="Permanent link">&para;</a></h2>
<p><strong>Scenario:</strong> Service fails to start, no error logs.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>strace<span class="w"> </span>-f<span class="w"> </span>-e<span class="w"> </span><span class="nv">trace</span><span class="o">=</span>file,process<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>my-service
</code></pre></div>
<p><strong>Output reveals:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>openat(AT_FDCWD, &quot;/etc/my-service/config&quot;, O_RDONLY) = -1 ENOENT (No such file or directory)
</code></pre></div></p>
<p><strong>Solution:</strong> Create missing config file.</p>
<hr />
<h2 id="12-key-takeaways">12. Key Takeaways<a class="headerlink" href="#12-key-takeaways" title="Permanent link">&para;</a></h2>
<p><strong>Accomplished:</strong>
1.  Traced system calls with strace
2.  Traced library calls with ltrace
3.  Filtered and analyzed trace output
4.  Identified performance bottlenecks
5.  Debugged file access and permission issues</p>
<p><strong>Essential Commands:</strong>
- <code>strace -e trace=file ./app</code>: File operations
- <code>strace -c ./app</code>: Call statistics
- <code>strace -p PID</code>: Attach to process
- <code>ltrace -e malloc,free ./app</code>: Memory allocation</p>
<p><strong>Next Steps:</strong>
- <strong>Lab 22</strong>: Memory debugging with valgrind
- <strong>Lab 23</strong>: Performance profiling</p>
<hr />
<h2 id="13-verification-checklist">13. Verification Checklist<a class="headerlink" href="#13-verification-checklist" title="Permanent link">&para;</a></h2>
<ul>
<li>[ ] Can trace system calls of a program</li>
<li>[ ] Can filter specific syscall categories</li>
<li>[ ] Can attach to running processes</li>
<li>[ ] Can identify slow syscalls with timing</li>
<li>[ ] Understand difference between strace and ltrace</li>
<li>[ ] Can debug file access issues</li>
</ul>
<hr />
<p><strong>End of Lab 21</strong></p>
<p><em>The Guide rates this lab: </em><em>Mostly Harmless</em><em> </em></p>
<p><code>strace</code> and <code>ltrace</code> are invaluable for understanding program behavior at the system level. They reveal exactly how applications interact with the kernel and libraries, making seemingly mysterious bugs transparent.</p>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="January 30, 2026 15:44:01 UTC">January 30, 2026</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="January 30, 2026 15:44:01 UTC">January 30, 2026</span>
  </span>

    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Jofralso. Licensed under MIT.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Jofralso" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="https://buymeacoffee.com/jofralso" target="_blank" rel="noopener" title="Buy Me A Coffee" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M152-16c-13.3 0-24 10.7-24 24 0 38.9 23.4 59.4 39.1 73.1l1.1 1C184.5 96.4 192 103.9 192 120c0 13.3 10.7 24 24 24s24-10.7 24-24c0-38.9-23.4-59.4-39.1-73.1l-1.1-1C183.5 31.7 176 24.1 176 8c0-13.3-10.7-24-24-24M96 192c-17.7 0-32 14.3-32 32v192c0 53 43 96 96 96h192c41.8 0 77.4-26.7 90.5-64h5.5c70.7 0 128-57.3 128-128s-57.3-128-128-128zm352 192V256c35.3 0 64 28.7 64 64s-28.7 64-64 64M288 8c0-13.3-10.7-24-24-24S240-5.3 240 8c0 38.9 23.4 59.4 39.1 73.1l1.1 1C296.5 96.4 304 103.9 304 120c0 13.3 10.7 24 24 24s24-10.7 24-24c0-38.9-23.4-59.4-39.1-73.1l-1.1-1C295.5 31.7 288 24.1 288 8"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>