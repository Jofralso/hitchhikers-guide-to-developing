
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A structured meta-repository for learning systems engineering, embedded Linux, and infrastructure automation">
      
      
        <meta name="author" content="Jofralso">
      
      
        <link rel="canonical" href="https://jofralso.github.io/hitchhikers-guide-to-developing/labs/debugging/lab22-valgrind/">
      
      
        <link rel="prev" href="../lab21-strace-ltrace/">
      
      
        <link rel="next" href="../lab23-perf-ftrace/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Lab 22 - Valgrind - The Hitchhiker's Guide to Developing</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lab-22-memory-debugging-with-valgrind" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="The Hitchhiker&#39;s Guide to Developing" class="md-header__button md-logo" aria-label="The Hitchhiker's Guide to Developing" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            The Hitchhiker's Guide to Developing
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Lab 22 - Valgrind
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="deep-orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Jofralso/hitchhikers-guide-to-developing" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Jofralso/hitchhikers-guide-to-developing
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../QUICK_START/" class="md-tabs__link">
          
  
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../embedded-linux/" class="md-tabs__link">
          
  
  
  Labs

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../THE-JOURNEY/" class="md-tabs__link">
        
  
  
    
  
  The Journey

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../ROADMAP/" class="md-tabs__link">
        
  
  
    
  
  Roadmap

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../ARCHITECTURE/" class="md-tabs__link">
        
  
  
    
  
  Architecture

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../BIBLIOGRAPHY/" class="md-tabs__link">
        
  
  
    
  
  Bibliography

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../submodules/index.md" class="md-tabs__link">
          
  
  
  Submodules

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../templates/lab-template/" class="md-tabs__link">
          
  
  
  Templates

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../standards/documentation-standards/" class="md-tabs__link">
          
  
  
  Standards

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../CONTRIBUTING/" class="md-tabs__link">
        
  
  
    
  
  Contributing

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="The Hitchhiker&#39;s Guide to Developing" class="md-nav__button md-logo" aria-label="The Hitchhiker's Guide to Developing" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    The Hitchhiker's Guide to Developing
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Jofralso/hitchhikers-guide-to-developing" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Jofralso/hitchhikers-guide-to-developing
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../QUICK_START/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Start
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../BEAGLEPLAY_SETUP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    BeaglePlay Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../LAB_STRUCTURE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab Structure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Labs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Labs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Embedded Linux
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Embedded Linux
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../embedded-linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../embedded-linux/lab01-toolchain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 1 - Toolchain
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../embedded-linux/lab02-hardware/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 2 - Hardware Discovery
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../embedded-linux/lab03-bootloader/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 3 - U-Boot Bootloader
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../embedded-linux/lab04-kernel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 4 - Linux Kernel
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../embedded-linux/lab05-rootfs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 5 - Root Filesystem
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../embedded-linux/lab06-hardware/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 6 - Hardware Devices
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../embedded-linux/lab07-block-filesystems/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 7 - Block Filesystems
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../embedded-linux/lab08-buildroot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 8 - Buildroot
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../embedded-linux/lab09-application-development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 9 - App Development
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Yocto Project
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Yocto Project
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab10-yocto-first-build/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 10 - First Yocto Build
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab11-yocto-advanced-config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 11 - Advanced Config
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab12-yocto-custom-app/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 12 - Custom Application
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab13-yocto-custom-layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 13 - Custom Layer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab14-yocto-extend-recipe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 14 - Extend Recipe
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab15-yocto-custom-machine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 15 - Custom Machine
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab16-yocto-custom-image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 16 - Custom Image
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab17-yocto-app-development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 17 - SDK Development
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab18-yocto-devtool/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 18 - Devtool
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Debugging
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Debugging
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab19-system-monitoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 19 - System Monitoring
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab20-gdb-debugging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 20 - GDB Debugging
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab21-strace-ltrace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 21 - strace/ltrace
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Lab 22 - Valgrind
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 22 - Valgrind
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dont-panic" class="md-nav__link">
    <span class="md-ellipsis">
      
        DON'T PANIC
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#objectives" class="md-nav__link">
    <span class="md-ellipsis">
      
        Objectives
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-introduction-to-valgrind" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Introduction to Valgrind
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Introduction to Valgrind">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-what-is-valgrind" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.1 What is Valgrind?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-install-valgrind" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.2 Install Valgrind
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-memory-leak-detection" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Memory Leak Detection
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Memory Leak Detection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-simple-memory-leak" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Simple Memory Leak
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-leak-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 Leak Types
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-complex-leak-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3 Complex Leak Example
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-invalid-memory-access" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Invalid Memory Access
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Invalid Memory Access">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-buffer-overflow" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Buffer Overflow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-use-after-free" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Use-After-Free
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-uninitialized-memory" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3 Uninitialized Memory
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-debugging-with-vgdb" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Debugging with vgdb
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Debugging with vgdb">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-combine-valgrind-and-gdb" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1 Combine Valgrind and GDB
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-debug-memory-error-with-vgdb" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2 Debug Memory Error with vgdb
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-monitor-specific-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3 Monitor Specific Allocation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-heap-profiling-with-massif" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Heap Profiling with Massif
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Heap Profiling with Massif">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-profile-heap-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 Profile Heap Usage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-visualize-heap-profile" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2 Visualize Heap Profile
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-identify-allocation-hotspots" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3 Identify Allocation Hotspots
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-cache-profiling-with-cachegrind" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Cache Profiling with Cachegrind
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Cache Profiling with Cachegrind">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-profile-cache-misses" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 Profile Cache Misses
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-analyze-cache-performance" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.2 Analyze Cache Performance
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-suppression-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Suppression Files
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Suppression Files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-ignore-known-issues" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1 Ignore Known Issues
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-generate-suppressions" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2 Generate Suppressions
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-performance-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Performance Considerations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. Performance Considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81-valgrind-slowdown" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1 Valgrind Slowdown
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82-optimize-valgrind-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.2 Optimize Valgrind Usage
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-real-world-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. Real-World Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9. Real-World Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#91-find-leak-in-long-running-daemon" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.1 Find Leak in Long-Running Daemon
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#92-debug-embedded-memory-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.2 Debug Embedded Memory Constraints
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-advanced-valgrind-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        10. Advanced Valgrind Options
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10. Advanced Valgrind Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#101-track-file-descriptors" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.1 Track File Descriptors
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#102-detailed-leak-info" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.2 Detailed Leak Info
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        11. Troubleshooting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11. Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111-valgrind-errors" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.1 Valgrind Errors
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#112-false-positives" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.2 False Positives
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#12-key-takeaways" class="md-nav__link">
    <span class="md-ellipsis">
      
        12. Key Takeaways
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#13-verification-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      
        13. Verification Checklist
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab23-perf-ftrace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 23 - perf & ftrace
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab24-ebpf-bcc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 24 - eBPF & BCC
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab25-kernel-debugging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 25 - Kernel Debugging
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab26-kdump-kexec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 26 - kdump & kexec
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../THE-JOURNEY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    The Journey
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ROADMAP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Roadmap
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ARCHITECTURE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../BIBLIOGRAPHY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bibliography
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Submodules
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Submodules
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../submodules/index.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Templates
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Templates
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../templates/lab-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab Template
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../templates/research-note/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Research Note
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../templates/technical-procedure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Technical Procedure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Standards
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Standards
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../standards/documentation-standards/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documentation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CONTRIBUTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dont-panic" class="md-nav__link">
    <span class="md-ellipsis">
      
        DON'T PANIC
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#objectives" class="md-nav__link">
    <span class="md-ellipsis">
      
        Objectives
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-introduction-to-valgrind" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Introduction to Valgrind
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Introduction to Valgrind">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-what-is-valgrind" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.1 What is Valgrind?
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-install-valgrind" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.2 Install Valgrind
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-memory-leak-detection" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Memory Leak Detection
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Memory Leak Detection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-simple-memory-leak" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Simple Memory Leak
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-leak-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 Leak Types
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-complex-leak-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3 Complex Leak Example
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-invalid-memory-access" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Invalid Memory Access
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Invalid Memory Access">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-buffer-overflow" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Buffer Overflow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-use-after-free" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Use-After-Free
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-uninitialized-memory" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.3 Uninitialized Memory
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-debugging-with-vgdb" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Debugging with vgdb
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Debugging with vgdb">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-combine-valgrind-and-gdb" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1 Combine Valgrind and GDB
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-debug-memory-error-with-vgdb" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2 Debug Memory Error with vgdb
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-monitor-specific-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3 Monitor Specific Allocation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-heap-profiling-with-massif" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Heap Profiling with Massif
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Heap Profiling with Massif">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-profile-heap-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 Profile Heap Usage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-visualize-heap-profile" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2 Visualize Heap Profile
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-identify-allocation-hotspots" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3 Identify Allocation Hotspots
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-cache-profiling-with-cachegrind" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Cache Profiling with Cachegrind
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Cache Profiling with Cachegrind">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-profile-cache-misses" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 Profile Cache Misses
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-analyze-cache-performance" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.2 Analyze Cache Performance
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-suppression-files" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Suppression Files
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Suppression Files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-ignore-known-issues" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1 Ignore Known Issues
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-generate-suppressions" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2 Generate Suppressions
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-performance-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Performance Considerations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. Performance Considerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81-valgrind-slowdown" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.1 Valgrind Slowdown
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82-optimize-valgrind-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        8.2 Optimize Valgrind Usage
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-real-world-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. Real-World Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9. Real-World Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#91-find-leak-in-long-running-daemon" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.1 Find Leak in Long-Running Daemon
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#92-debug-embedded-memory-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      
        9.2 Debug Embedded Memory Constraints
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-advanced-valgrind-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        10. Advanced Valgrind Options
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10. Advanced Valgrind Options">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#101-track-file-descriptors" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.1 Track File Descriptors
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#102-detailed-leak-info" class="md-nav__link">
    <span class="md-ellipsis">
      
        10.2 Detailed Leak Info
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        11. Troubleshooting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="11. Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#111-valgrind-errors" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.1 Valgrind Errors
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#112-false-positives" class="md-nav__link">
    <span class="md-ellipsis">
      
        11.2 False Positives
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#12-key-takeaways" class="md-nav__link">
    <span class="md-ellipsis">
      
        12. Key Takeaways
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#13-verification-checklist" class="md-nav__link">
    <span class="md-ellipsis">
      
        13. Verification Checklist
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="lab-22-memory-debugging-with-valgrind">Lab 22: Memory Debugging with Valgrind<a class="headerlink" href="#lab-22-memory-debugging-with-valgrind" title="Permanent link">&para;</a></h1>
<h2 id="dont-panic">DON'T PANIC<a class="headerlink" href="#dont-panic" title="Permanent link">&para;</a></h2>
<p>The Hitchhiker's Guide to Embedded Linux has this to say about debugging:</p>
<p><em>"Debugging is the art of figuring out why your code doesn't work, as opposed to why you thought it would work. This is similar to the difference between what Deep Thought calculated (42) and what everyone expected (a useful answer). Both are technically correct, but only one is helpful."</em></p>
<h2 id="objectives">Objectives<a class="headerlink" href="#objectives" title="Permanent link">&para;</a></h2>
<p>Master Valgrind for detecting memory leaks, buffer overflows, use-after-free bugs, and other memory errors that cause crashes and security vulnerabilities.</p>
<p><strong>What You'll Learn:</strong>
- Detect memory leaks with Memcheck
- Find buffer overflows and underruns
- Identify use-after-free errors
- Debug with vgdb (Valgrind + GDB)
- Profile heap usage with Massif
- Optimize cache performance with Cachegrind</p>
<p><strong>Time Required:</strong> 3-4 hours</p>
<hr />
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<p><strong>Hardware:</strong>
- BeaglePlay board
- Development workstation
- 2GB+ RAM recommended</p>
<p><strong>Software:</strong>
- Valgrind installed
- Programs compiled with <code>-g</code> debug symbols</p>
<hr />
<h2 id="1-introduction-to-valgrind">1. Introduction to Valgrind<a class="headerlink" href="#1-introduction-to-valgrind" title="Permanent link">&para;</a></h2>
<h3 id="11-what-is-valgrind">1.1 What is Valgrind?<a class="headerlink" href="#11-what-is-valgrind" title="Permanent link">&para;</a></h3>
<p><strong>Valgrind</strong> is a dynamic analysis framework with multiple tools:
- <strong>Memcheck</strong>: Memory error detector (default)
- <strong>Massif</strong>: Heap profiler
- <strong>Cachegrind</strong>: Cache profiler
- <strong>Helgrind</strong>: Thread error detector
- <strong>Callgrind</strong>: Call-graph profiler</p>
<h3 id="12-install-valgrind">1.2 Install Valgrind<a class="headerlink" href="#12-install-valgrind" title="Permanent link">&para;</a></h3>
<p><strong>On BeaglePlay:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># Buildroot</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>opkg<span class="w"> </span>install<span class="w"> </span>valgrind
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="c1"># Debian/Ubuntu</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>apt-get<span class="w"> </span>install<span class="w"> </span>valgrind
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="c1"># Yocto: Add to image</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>IMAGE_INSTALL:append<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot; valgrind&quot;</span>
</code></pre></div></p>
<p><strong>Verify:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>valgrind<span class="w"> </span>--version
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="c1"># valgrind-3.21.0</span>
</code></pre></div></p>
<hr />
<h2 id="2-memory-leak-detection">2. Memory Leak Detection<a class="headerlink" href="#2-memory-leak-detection" title="Permanent link">&para;</a></h2>
<h3 id="21-simple-memory-leak">2.1 Simple Memory Leak<a class="headerlink" href="#21-simple-memory-leak" title="Permanent link">&para;</a></h3>
<p><strong>Create <code>leak_simple.c</code>:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="mi">100</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">    </span><span class="n">array</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">    </span><span class="c1">// Forgot to free(array)!</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="p">}</span>
</code></pre></div></p>
<p><strong>Compile:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>aarch64-linux-gnu-gcc<span class="w"> </span>-g<span class="w"> </span>-o<span class="w"> </span>leak_simple<span class="w"> </span>leak_simple.c
</code></pre></div></p>
<p><strong>Run with Valgrind:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>valgrind<span class="w"> </span>--leak-check<span class="o">=</span>full<span class="w"> </span>./leak_simple
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>==567== Memcheck, a memory error detector
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>==567== Command: ./leak_simple
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>==567== 
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>==567== HEAP SUMMARY:
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>==567==     in use at exit: 400 bytes in 1 blocks
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>==567==   total heap usage: 1 allocs, 0 frees, 400 bytes allocated
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>==567== 
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>==567== 400 bytes in 1 blocks are definitely lost in loss record 1 of 1
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>==567==    at 0x4839D8C: malloc (vg_replace_malloc.c:381)
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>==567==    by 0x1086B7: main (leak_simple.c:4)
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>==567== 
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>==567== LEAK SUMMARY:
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>==567==    definitely lost: 400 bytes in 1 blocks
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>==567==    indirectly lost: 0 bytes in 0 blocks
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>==567==      possibly lost: 0 bytes in 0 blocks
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>==567==    still reachable: 0 bytes in 0 blocks
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>==567== 
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a>==567== ERROR SUMMARY: 1 errors from 1 contexts
</code></pre></div></p>
<p><strong>Analysis:</strong>
- <strong>400 bytes lost</strong> at line 4 (<code>malloc</code>)
- <strong>0 frees</strong> vs <strong>1 allocs</strong></p>
<p><strong>Fix:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="n">free</span><span class="p">(</span><span class="n">array</span><span class="p">);</span>
</code></pre></div></p>
<h3 id="22-leak-types">2.2 Leak Types<a class="headerlink" href="#22-leak-types" title="Permanent link">&para;</a></h3>
<p><strong>Definitely lost:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w">  </span><span class="c1">// Lost reference!</span>
</code></pre></div></p>
<p><strong>Indirectly lost:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">node</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">node</span><span class="w"> </span><span class="o">*</span><span class="n">next</span><span class="p">;</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="p">};</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="k">struct</span><span class="w"> </span><span class="nc">node</span><span class="w"> </span><span class="o">*</span><span class="n">head</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">node</span><span class="p">));</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">node</span><span class="p">));</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="n">free</span><span class="p">(</span><span class="n">head</span><span class="p">);</span><span class="w">  </span><span class="c1">// Lost head-&gt;next!</span>
</code></pre></div></p>
<p><strong>Still reachable:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="c1">// Program exits, pointer still valid</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="c1">// Not a &quot;leak&quot; but not freed</span>
</code></pre></div></p>
<p><strong>Possibly lost:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="n">p</span><span class="o">++</span><span class="p">;</span><span class="w">  </span><span class="c1">// Interior pointer</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="c1">// Valgrind unsure if this is intentional</span>
</code></pre></div></p>
<h3 id="23-complex-leak-example">2.3 Complex Leak Example<a class="headerlink" href="#23-complex-leak-example" title="Permanent link">&para;</a></h3>
<p><strong>Create <code>leak_complex.c</code>:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string.h&gt;</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">name</span><span class="p">;</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="p">;</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="p">}</span><span class="w"> </span><span class="n">Record</span><span class="p">;</span>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="n">Record</span><span class="o">*</span><span class="w"> </span><span class="nf">create_record</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="w">    </span><span class="n">Record</span><span class="w"> </span><span class="o">*</span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">Record</span><span class="p">));</span>
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="w">    </span><span class="n">r</span><span class="o">-&gt;</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strdup</span><span class="p">(</span><span class="n">n</span><span class="p">);</span><span class="w">  </span><span class="c1">// Allocates memory</span>
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="w">    </span><span class="n">r</span><span class="o">-&gt;</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="mi">100</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">r</span><span class="p">;</span>
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a><span class="p">}</span>
<a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a>
<a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a><span class="kt">void</span><span class="w"> </span><span class="nf">free_record_buggy</span><span class="p">(</span><span class="n">Record</span><span class="w"> </span><span class="o">*</span><span class="n">r</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a><span class="w">    </span><span class="n">free</span><span class="p">(</span><span class="n">r</span><span class="o">-&gt;</span><span class="n">name</span><span class="p">);</span>
<a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a><span class="w">    </span><span class="c1">// Forgot to free r-&gt;data!</span>
<a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a><span class="w">    </span><span class="n">free</span><span class="p">(</span><span class="n">r</span><span class="p">);</span>
<a id="__codelineno-11-20" name="__codelineno-11-20" href="#__codelineno-11-20"></a><span class="p">}</span>
<a id="__codelineno-11-21" name="__codelineno-11-21" href="#__codelineno-11-21"></a>
<a id="__codelineno-11-22" name="__codelineno-11-22" href="#__codelineno-11-22"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-23" name="__codelineno-11-23" href="#__codelineno-11-23"></a><span class="w">    </span><span class="n">Record</span><span class="w"> </span><span class="o">*</span><span class="n">rec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">create_record</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">);</span>
<a id="__codelineno-11-24" name="__codelineno-11-24" href="#__codelineno-11-24"></a><span class="w">    </span><span class="n">free_record_buggy</span><span class="p">(</span><span class="n">rec</span><span class="p">);</span>
<a id="__codelineno-11-25" name="__codelineno-11-25" href="#__codelineno-11-25"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-11-26" name="__codelineno-11-26" href="#__codelineno-11-26"></a><span class="p">}</span>
</code></pre></div></p>
<p><strong>Run Valgrind:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>valgrind<span class="w"> </span>--leak-check<span class="o">=</span>full<span class="w"> </span>./leak_complex
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>==567== 400 bytes in 1 blocks are definitely lost in loss record 1 of 1
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>==567==    at 0x4839D8C: malloc (vg_replace_malloc.c:381)
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>==567==    by 0x108723: create_record (leak_complex.c:11)
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>==567==    by 0x108789: main (leak_complex.c:20)
</code></pre></div></p>
<p><strong>Shows <code>r-&gt;data</code> allocation never freed.</strong></p>
<hr />
<h2 id="3-invalid-memory-access">3. Invalid Memory Access<a class="headerlink" href="#3-invalid-memory-access" title="Permanent link">&para;</a></h2>
<h3 id="31-buffer-overflow">3.1 Buffer Overflow<a class="headerlink" href="#31-buffer-overflow" title="Permanent link">&para;</a></h3>
<p><strong>Create <code>overflow.c</code>:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string.h&gt;</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="w">    </span><span class="n">strcpy</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;This string is way too long!&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// Overflow!</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="p">}</span>
</code></pre></div></p>
<p><strong>Run Valgrind:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>valgrind<span class="w"> </span>./overflow
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>==567== Invalid write of size 1
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>==567==    at 0x483970C: strcpy (vg_replace_strmem.c:523)
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>==567==    by 0x1086C7: main (overflow.c:5)
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>==567==  Address 0x4a3f04a is 0 bytes after a block of size 10 alloc&#39;d
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>==567==    at 0x483977F: malloc (vg_replace_malloc.c:381)
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>==567==    by 0x1086B3: main (overflow.c:4)
</code></pre></div></p>
<p><strong>Detected write beyond allocated buffer.</strong></p>
<h3 id="32-use-after-free">3.2 Use-After-Free<a class="headerlink" href="#32-use-after-free" title="Permanent link">&para;</a></h3>
<p><strong>Create <code>use_after_free.c</code>:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="w">    </span><span class="o">*</span><span class="n">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="w">    </span><span class="n">free</span><span class="p">(</span><span class="n">ptr</span><span class="p">);</span>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">ptr</span><span class="p">);</span><span class="w">  </span><span class="c1">// Use after free!</span>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="p">}</span>
</code></pre></div></p>
<p><strong>Run Valgrind:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>valgrind<span class="w"> </span>./use_after_free
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>==567== Invalid read of size 4
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>==567==    at 0x1086D7: main (use_after_free.c:8)
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>==567==  Address 0x4a3f040 is 0 bytes inside a block of size 4 free&#39;d
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>==567==    at 0x48399AB: free (vg_replace_malloc.c:755)
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>==567==    by 0x1086C3: main (use_after_free.c:7)
</code></pre></div></p>
<p><strong>Detected read from freed memory.</strong></p>
<h3 id="33-uninitialized-memory">3.3 Uninitialized Memory<a class="headerlink" href="#33-uninitialized-memory" title="Permanent link">&para;</a></h3>
<p><strong>Create <code>uninit.c</code>:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">ptr</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">42</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// Reading uninitialized!</span>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Magic number!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="w">    </span><span class="n">free</span><span class="p">(</span><span class="n">ptr</span><span class="p">);</span>
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a><span class="p">}</span>
</code></pre></div></p>
<p><strong>Run Valgrind:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>valgrind<span class="w"> </span>./uninit
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>==567== Conditional jump or move depends on uninitialised value(s)
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>==567==    at 0x1086C7: main (uninit.c:6)
</code></pre></div></p>
<hr />
<h2 id="4-debugging-with-vgdb">4. Debugging with vgdb<a class="headerlink" href="#4-debugging-with-vgdb" title="Permanent link">&para;</a></h2>
<h3 id="41-combine-valgrind-and-gdb">4.1 Combine Valgrind and GDB<a class="headerlink" href="#41-combine-valgrind-and-gdb" title="Permanent link">&para;</a></h3>
<p><strong>Start program under Valgrind:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>valgrind<span class="w"> </span>--vgdb<span class="o">=</span>yes<span class="w"> </span>--vgdb-error<span class="o">=</span><span class="m">0</span><span class="w"> </span>./my-app
</code></pre></div></p>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>==567== TO CONTROL THIS PROCESS USING vgdb:
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>==567==   target remote | /usr/lib/valgrind/vgdb --pid=567
</code></pre></div></p>
<p><strong>In another terminal, start GDB:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>gdb<span class="w"> </span>./my-app
</code></pre></div></p>
<p><strong>In GDB, connect to vgdb:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>(gdb) target remote | vgdb --pid=567
</code></pre></div></p>
<p><strong>Now GDB controls program running under Valgrind!</strong></p>
<h3 id="42-debug-memory-error-with-vgdb">4.2 Debug Memory Error with vgdb<a class="headerlink" href="#42-debug-memory-error-with-vgdb" title="Permanent link">&para;</a></h3>
<p><strong>When Valgrind detects error, it pauses:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>(gdb) continue
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a># Valgrind detects invalid write
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>(gdb) backtrace
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>#0  strcpy () at vg_replace_strmem.c:523
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>#1  0x1086c7 in main () at overflow.c:5
<a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a>
<a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a>(gdb) print buffer
<a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a>$1 = &quot;This strin&quot;  # Truncated due to overflow
<a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a>
<a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a>(gdb) x/20c buffer
<a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a># Examine memory to see corruption
</code></pre></div>
<h3 id="43-monitor-specific-allocation">4.3 Monitor Specific Allocation<a class="headerlink" href="#43-monitor-specific-allocation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>(gdb) monitor leak_check full reachable any
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a># Request leak check via vgdb
</code></pre></div>
<hr />
<h2 id="5-heap-profiling-with-massif">5. Heap Profiling with Massif<a class="headerlink" href="#5-heap-profiling-with-massif" title="Permanent link">&para;</a></h2>
<h3 id="51-profile-heap-usage">5.1 Profile Heap Usage<a class="headerlink" href="#51-profile-heap-usage" title="Permanent link">&para;</a></h3>
<p><strong>Create <code>heap_growth.c</code>:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span>
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="w">        </span><span class="n">malloc</span><span class="p">(</span><span class="mi">1024</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1024</span><span class="p">);</span><span class="w">  </span><span class="c1">// 1MB allocations</span>
<a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="w">        </span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a><span class="p">}</span>
</code></pre></div></p>
<p><strong>Run Massif:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>valgrind<span class="w"> </span>--tool<span class="o">=</span>massif<span class="w"> </span>./heap_growth
</code></pre></div></p>
<p><strong>Massif creates <code>massif.out.&lt;pid&gt;</code> file.</strong></p>
<h3 id="52-visualize-heap-profile">5.2 Visualize Heap Profile<a class="headerlink" href="#52-visualize-heap-profile" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>ms_print<span class="w"> </span>massif.out.567
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>    MB
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>100.0^                                               #
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>     |                                             :#:
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>     |                                           ::#::
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>     |                                         :::#:::
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a> 50.0+                                       ::::#::::
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a>     |                                     :::::#:::::
<a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a>     |                                   ::::::#::::::
<a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a>     |                                 :::::::#:::::::
<a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a>     |                               ::::::::#::::::::
<a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a>  0.0+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#@@@@@@@@@
<a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a>    +------------------------------------------------------
<a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a>       0                  Time                         100s
<a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a>
<a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a>Number of snapshots: 50
<a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a> Detailed snapshots: [5, 10, 15, 20, 25, 30, 35, 40, 45, 50]
</code></pre></div></p>
<p><strong>ASCII graph shows heap growth over time.</strong></p>
<h3 id="53-identify-allocation-hotspots">5.3 Identify Allocation Hotspots<a class="headerlink" href="#53-identify-allocation-hotspots" title="Permanent link">&para;</a></h3>
<p><strong>At peak (snapshot 50):</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>Snapshot 50
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>================================================================================
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>  n        time(i)         total(B)   useful-heap(B) extra-heap(B)    stacks(B)
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>--------------------------------------------------------------------------------
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a> 50     50,000,000      100,000,000      100,000,000             0            0
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a>
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a>99.8% (100,000,000B) (heap allocation functions) malloc/new/new[], --alloc-fns, etc.
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a>-&gt;99.8% (100,000,000B) 0x1086C7: main (heap_growth.c:5)
</code></pre></div></p>
<p><strong>Shows 99.8% allocated at line 5 (<code>malloc</code>).</strong></p>
<hr />
<h2 id="6-cache-profiling-with-cachegrind">6. Cache Profiling with Cachegrind<a class="headerlink" href="#6-cache-profiling-with-cachegrind" title="Permanent link">&para;</a></h2>
<h3 id="61-profile-cache-misses">6.1 Profile Cache Misses<a class="headerlink" href="#61-profile-cache-misses" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>valgrind<span class="w"> </span>--tool<span class="o">=</span>cachegrind<span class="w"> </span>./my-app
</code></pre></div>
<p><strong>Creates <code>cachegrind.out.&lt;pid&gt;</code>.</strong></p>
<h3 id="62-analyze-cache-performance">6.2 Analyze Cache Performance<a class="headerlink" href="#62-analyze-cache-performance" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>cg_annotate<span class="w"> </span>cachegrind.out.567
</code></pre></div>
<p><strong>Output:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>I1 cache:         16384 B, 64 B, 4-way associative
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>D1 cache:         16384 B, 64 B, 4-way associative
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>LL cache:       2097152 B, 64 B, 16-way associative
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a>
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a>Ir           I1mr  ILmr          Dr        D1mr  DLmr          Dw        D1mw  DLmw 
<a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a>================================================================================
<a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a>1,245,678      123    45     456,789      1,234    567     234,567         89    34  PROGRAM TOTALS
<a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a>
<a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a>Ir           I1mr  ILmr          Dr        D1mr  DLmr          Dw        D1mw  DLmw  file:function
<a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a>--------------------------------------------------------------------------------
<a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a>  456,789       45    12     123,456        567    234      98,765         34    12  heap_growth.c:main
</code></pre></div></p>
<p><strong>Metrics:</strong>
- <strong>Ir</strong>: Instruction reads
- <strong>Dr/Dw</strong>: Data reads/writes
- <strong>I1mr/D1mr</strong>: L1 cache misses
- <strong>ILmr/DLmr</strong>: Last-level cache misses</p>
<hr />
<h2 id="7-suppression-files">7. Suppression Files<a class="headerlink" href="#7-suppression-files" title="Permanent link">&para;</a></h2>
<h3 id="71-ignore-known-issues">7.1 Ignore Known Issues<a class="headerlink" href="#71-ignore-known-issues" title="Permanent link">&para;</a></h3>
<p><strong>Create <code>valgrind.supp</code>:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>{
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>   known_libc_leak
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a>   Memcheck:Leak
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a>   fun:malloc
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a>   fun:*libc*
<a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a>}
</code></pre></div></p>
<p><strong>Use suppression:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>valgrind<span class="w"> </span>--suppressions<span class="o">=</span>valgrind.supp<span class="w"> </span>./my-app
</code></pre></div></p>
<h3 id="72-generate-suppressions">7.2 Generate Suppressions<a class="headerlink" href="#72-generate-suppressions" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>valgrind<span class="w"> </span>--gen-suppressions<span class="o">=</span>all<span class="w"> </span>./my-app
</code></pre></div>
<p><strong>Prints suppression entries for each error.</strong></p>
<hr />
<h2 id="8-performance-considerations">8. Performance Considerations<a class="headerlink" href="#8-performance-considerations" title="Permanent link">&para;</a></h2>
<h3 id="81-valgrind-slowdown">8.1 Valgrind Slowdown<a class="headerlink" href="#81-valgrind-slowdown" title="Permanent link">&para;</a></h3>
<p><strong>Valgrind makes programs ~10-30x slower.</strong></p>
<p><strong>Techniques:</strong>
- Test with smaller datasets
- Profile specific parts
- Use on development builds only</p>
<h3 id="82-optimize-valgrind-usage">8.2 Optimize Valgrind Usage<a class="headerlink" href="#82-optimize-valgrind-usage" title="Permanent link">&para;</a></h3>
<p><strong>Reduce overhead:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="c1"># Basic leak check (faster)</span>
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a>valgrind<span class="w"> </span>--leak-check<span class="o">=</span>summary<span class="w"> </span>./my-app
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a>
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="c1"># No leak check (even faster, just memory errors)</span>
<a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a>valgrind<span class="w"> </span>--leak-check<span class="o">=</span>no<span class="w"> </span>./my-app
</code></pre></div></p>
<hr />
<h2 id="9-real-world-examples">9. Real-World Examples<a class="headerlink" href="#9-real-world-examples" title="Permanent link">&para;</a></h2>
<h3 id="91-find-leak-in-long-running-daemon">9.1 Find Leak in Long-Running Daemon<a class="headerlink" href="#91-find-leak-in-long-running-daemon" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="c1"># Start daemon under Valgrind</span>
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a>valgrind<span class="w"> </span>--leak-check<span class="o">=</span>full<span class="w"> </span>--log-file<span class="o">=</span>valgrind.log<span class="w"> </span>./my-daemon<span class="w"> </span><span class="p">&amp;</span>
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a>
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a><span class="c1"># Let run for hours/days</span>
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a><span class="c1"># ...</span>
<a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a>
<a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a><span class="c1"># Request leak check</span>
<a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a>killall<span class="w"> </span>-USR1<span class="w"> </span>my-daemon
<a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a><span class="c1"># Valgrind outputs leak report</span>
</code></pre></div>
<h3 id="92-debug-embedded-memory-constraints">9.2 Debug Embedded Memory Constraints<a class="headerlink" href="#92-debug-embedded-memory-constraints" title="Permanent link">&para;</a></h3>
<p><strong>BeaglePlay has limited RAM:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="c1"># Monitor heap usage</span>
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>valgrind<span class="w"> </span>--tool<span class="o">=</span>massif<span class="w"> </span>--massif-out-file<span class="o">=</span>massif.out<span class="w"> </span>./embedded-app
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="c1"># Analyze</span>
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a>ms_print<span class="w"> </span>massif.out
<a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a><span class="c1"># Find peak memory usage and allocation sites</span>
</code></pre></div>
<hr />
<h2 id="10-advanced-valgrind-options">10. Advanced Valgrind Options<a class="headerlink" href="#10-advanced-valgrind-options" title="Permanent link">&para;</a></h2>
<h3 id="101-track-file-descriptors">10.1 Track File Descriptors<a class="headerlink" href="#101-track-file-descriptors" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>valgrind<span class="w"> </span>--track-fds<span class="o">=</span>yes<span class="w"> </span>./my-app
</code></pre></div>
<p><strong>Reports unclosed file descriptors at exit.</strong></p>
<h3 id="102-detailed-leak-info">10.2 Detailed Leak Info<a class="headerlink" href="#102-detailed-leak-info" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>valgrind<span class="w"> </span>--leak-check<span class="o">=</span>full<span class="w"> </span>--show-leak-kinds<span class="o">=</span>all<span class="w"> </span>--track-origins<span class="o">=</span>yes<span class="w"> </span>./my-app
</code></pre></div>
<p><strong>Options:</strong>
- <code>--show-leak-kinds=all</code>: Show all leak types
- <code>--track-origins=yes</code>: Track origin of uninitialized values (slower)</p>
<hr />
<h2 id="11-troubleshooting">11. Troubleshooting<a class="headerlink" href="#11-troubleshooting" title="Permanent link">&para;</a></h2>
<h3 id="111-valgrind-errors">11.1 Valgrind Errors<a class="headerlink" href="#111-valgrind-errors" title="Permanent link">&para;</a></h3>
<p><strong>"Cannot execute binary file":</strong>
- Cross-compiled binary needs Valgrind on target</p>
<p><strong>"vgpreload libraries not found":</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="nb">export</span><span class="w"> </span><span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/usr/lib/valgrind
</code></pre></div></p>
<h3 id="112-false-positives">11.2 False Positives<a class="headerlink" href="#112-false-positives" title="Permanent link">&para;</a></h3>
<p><strong>System libraries may show "leaks":</strong>
- Use suppression files
- Focus on your code's allocations</p>
<hr />
<h2 id="12-key-takeaways">12. Key Takeaways<a class="headerlink" href="#12-key-takeaways" title="Permanent link">&para;</a></h2>
<p><strong>Accomplished:</strong>
1.  Detected memory leaks with Memcheck
2.  Found buffer overflows and use-after-free
3.  Used vgdb for interactive debugging
4.  Profiled heap with Massif
5.  Analyzed cache performance with Cachegrind</p>
<p><strong>Essential Commands:</strong>
- <code>valgrind --leak-check=full ./app</code>: Full leak check
- <code>valgrind --tool=massif ./app</code>: Heap profiling
- <code>valgrind --vgdb=yes ./app</code>: GDB integration
- <code>ms_print massif.out.PID</code>: View heap profile</p>
<p><strong>Next Steps:</strong>
- <strong>Lab 23</strong>: System-wide profiling with perf and ftrace
- <strong>Lab 24</strong>: eBPF tracing</p>
<hr />
<h2 id="13-verification-checklist">13. Verification Checklist<a class="headerlink" href="#13-verification-checklist" title="Permanent link">&para;</a></h2>
<ul>
<li>[ ] Can detect memory leaks</li>
<li>[ ] Can identify buffer overflows</li>
<li>[ ] Can debug with vgdb</li>
<li>[ ] Understand heap profiling</li>
<li>[ ] Can suppress known false positives</li>
<li>[ ] Know when to use each Valgrind tool</li>
</ul>
<hr />
<p><strong>End of Lab 22</strong></p>
<p><em>The Guide rates this lab: </em><em>Mostly Harmless</em><em> </em></p>
<p>Valgrind is essential for producing robust, memory-safe software. The time invested in fixing memory errors pays dividends in stability, security, and easier maintenance.</p>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="January 30, 2026 15:44:01 UTC">January 30, 2026</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="January 30, 2026 15:44:01 UTC">January 30, 2026</span>
  </span>

    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Jofralso. Licensed under MIT.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Jofralso" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="https://buymeacoffee.com/jofralso" target="_blank" rel="noopener" title="Buy Me A Coffee" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M152-16c-13.3 0-24 10.7-24 24 0 38.9 23.4 59.4 39.1 73.1l1.1 1C184.5 96.4 192 103.9 192 120c0 13.3 10.7 24 24 24s24-10.7 24-24c0-38.9-23.4-59.4-39.1-73.1l-1.1-1C183.5 31.7 176 24.1 176 8c0-13.3-10.7-24-24-24M96 192c-17.7 0-32 14.3-32 32v192c0 53 43 96 96 96h192c41.8 0 77.4-26.7 90.5-64h5.5c70.7 0 128-57.3 128-128s-57.3-128-128-128zm352 192V256c35.3 0 64 28.7 64 64s-28.7 64-64 64M288 8c0-13.3-10.7-24-24-24S240-5.3 240 8c0 38.9 23.4 59.4 39.1 73.1l1.1 1C296.5 96.4 304 103.9 304 120c0 13.3 10.7 24 24 24s24-10.7 24-24c0-38.9-23.4-59.4-39.1-73.1l-1.1-1C295.5 31.7 288 24.1 288 8"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>