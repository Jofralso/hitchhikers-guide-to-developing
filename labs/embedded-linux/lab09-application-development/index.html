
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A structured meta-repository for learning systems engineering, embedded Linux, and infrastructure automation">
      
      
        <meta name="author" content="Jofralso">
      
      
        <link rel="canonical" href="https://jofralso.github.io/hitchhikers-guide-to-developing/labs/embedded-linux/lab09-application-development/">
      
      
        <link rel="prev" href="../lab08-buildroot/">
      
      
        <link rel="next" href="../../yocto/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Lab 9 - App Development - The Hitchhiker's Guide to Developing</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lab-9-application-development-and-debugging" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="The Hitchhiker&#39;s Guide to Developing" class="md-header__button md-logo" aria-label="The Hitchhiker's Guide to Developing" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            The Hitchhiker's Guide to Developing
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Lab 9 - App Development
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="deep-orange"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="deep-orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Jofralso/hitchhikers-guide-to-developing" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Jofralso/hitchhikers-guide-to-developing
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../QUICK_START/" class="md-tabs__link">
          
  
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
  Labs

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../THE-JOURNEY/" class="md-tabs__link">
        
  
  
    
  
  The Journey

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../ROADMAP/" class="md-tabs__link">
        
  
  
    
  
  Roadmap

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../ARCHITECTURE/" class="md-tabs__link">
        
  
  
    
  
  Architecture

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../BIBLIOGRAPHY/" class="md-tabs__link">
        
  
  
    
  
  Bibliography

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../submodules/index.md" class="md-tabs__link">
          
  
  
  Submodules

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../templates/lab-template/" class="md-tabs__link">
          
  
  
  Templates

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../standards/documentation-standards/" class="md-tabs__link">
          
  
  
  Standards

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../CONTRIBUTING/" class="md-tabs__link">
        
  
  
    
  
  Contributing

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="The Hitchhiker&#39;s Guide to Developing" class="md-nav__button md-logo" aria-label="The Hitchhiker's Guide to Developing" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    The Hitchhiker's Guide to Developing
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Jofralso/hitchhikers-guide-to-developing" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Jofralso/hitchhikers-guide-to-developing
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../QUICK_START/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Start
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../BEAGLEPLAY_SETUP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    BeaglePlay Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../LAB_STRUCTURE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab Structure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Labs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Labs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" checked>
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Embedded Linux
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Embedded Linux
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab01-toolchain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 1 - Toolchain
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab02-hardware/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 2 - Hardware Discovery
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab03-bootloader/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 3 - U-Boot Bootloader
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab04-kernel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 4 - Linux Kernel
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab05-rootfs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 5 - Root Filesystem
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab06-hardware/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 6 - Hardware Devices
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab07-block-filesystems/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 7 - Block Filesystems
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../lab08-buildroot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 8 - Buildroot
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Lab 9 - App Development
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 9 - App Development
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dont-panic" class="md-nav__link">
    <span class="md-ellipsis">
      
        DON'T PANIC
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#objectives" class="md-nav__link">
    <span class="md-ellipsis">
      
        Objectives
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lab-duration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lab Duration
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Application Architecture
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-setup" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment Setup
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Environment Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#working-directory" class="md-nav__link">
    <span class="md-ellipsis">
      
        Working Directory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-buildroot-system" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verify Buildroot System
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-1-third-party-library-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Section 1: Third-Party Library Integration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Section 1: Third-Party Library Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#understanding-library-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Understanding Library Dependencies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-libmpdclient-to-buildroot" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add libmpdclient to Buildroot
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rebuild-buildroot" class="md-nav__link">
    <span class="md-ellipsis">
      
        Rebuild Buildroot
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-library-installation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verify Library Installation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-2-cross-compiling-with-pkg-config" class="md-nav__link">
    <span class="md-ellipsis">
      
        Section 2: Cross-Compiling with pkg-config
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Section 2: Cross-Compiling with pkg-config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-application-source" class="md-nav__link">
    <span class="md-ellipsis">
      
        Create Application Source
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-pkg-config-for-cross-compilation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configure pkg-config for Cross-Compilation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cross-compile-the-application" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cross-Compile the Application
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-to-target" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deploy to Target
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-on-target" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test on Target
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-3-debugging-with-strace" class="md-nav__link">
    <span class="md-ellipsis">
      
        Section 3: Debugging with strace
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Section 3: Debugging with strace">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-strace-to-buildroot" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add strace to Buildroot
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trace-system-calls" class="md-nav__link">
    <span class="md-ellipsis">
      
        Trace System Calls
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-issues-detected-by-strace" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Issues Detected by strace
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-4-debugging-with-ltrace" class="md-nav__link">
    <span class="md-ellipsis">
      
        Section 4: Debugging with ltrace
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Section 4: Debugging with ltrace">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-ltrace-to-buildroot" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add ltrace to Buildroot
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trace-library-calls" class="md-nav__link">
    <span class="md-ellipsis">
      
        Trace Library Calls
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug-a-crash-with-ltrace" class="md-nav__link">
    <span class="md-ellipsis">
      
        Debug a Crash with ltrace
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-5-remote-debugging-with-gdb-and-gdbserver" class="md-nav__link">
    <span class="md-ellipsis">
      
        Section 5: Remote Debugging with gdb and gdbserver
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Section 5: Remote Debugging with gdb and gdbserver">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-gdb-and-gdbserver-to-buildroot" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add gdb and gdbserver to Buildroot
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compile-application-with-debug-symbols" class="md-nav__link">
    <span class="md-ellipsis">
      
        Compile Application with Debug Symbols
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-gdbserver-on-target" class="md-nav__link">
    <span class="md-ellipsis">
      
        Start gdbserver on Target
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connect-from-host-with-gdb" class="md-nav__link">
    <span class="md-ellipsis">
      
        Connect from Host with gdb
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-6-visual-studio-code-remote-debugging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Section 6: Visual Studio Code Remote Debugging
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Section 6: Visual Studio Code Remote Debugging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-vs-code-extensions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Install VS Code Extensions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prepare-target-for-vs-code-debugging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prepare Target for VS Code Debugging
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-vs-code-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Create VS Code Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug-in-vs-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        Debug in VS Code
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-7-post-mortem-analysis-with-core-dumps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Section 7: Post-Mortem Analysis with Core Dumps
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Section 7: Post-Mortem Analysis with Core Dumps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enable-core-dumps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enable Core Dumps
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#introduce-a-crash" class="md-nav__link">
    <span class="md-ellipsis">
      
        Introduce a Crash
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#collect-core-dump" class="md-nav__link">
    <span class="md-ellipsis">
      
        Collect Core Dump
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#analyze-core-dump" class="md-nav__link">
    <span class="md-ellipsis">
      
        Analyze Core Dump
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-8-system-profiling-with-perf" class="md-nav__link">
    <span class="md-ellipsis">
      
        Section 8: System Profiling with perf
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Section 8: System Profiling with perf">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-perf-to-buildroot" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add perf to Buildroot
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#profile-application" class="md-nav__link">
    <span class="md-ellipsis">
      
        Profile Application
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-wide-profiling" class="md-nav__link">
    <span class="md-ellipsis">
      
        System-Wide Profiling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#live-profiling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Live Profiling
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting-guide" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting Guide
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting Guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problem-pkg-config-cant-find-libmpdclient" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problem: pkg-config can't find libmpdclient
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#problem-gdb-cant-find-libraries" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problem: gdb can't find libraries
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#problem-gdbserver-connection-refused" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problem: gdbserver connection refused
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#problem-segmentation-fault-without-useful-info" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problem: Segmentation fault without useful info
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#problem-perf-record-permission-denied" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problem: perf record permission denied
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-challenges" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced Challenges
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Challenges">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#challenge-1-add-logging-infrastructure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Challenge 1: Add Logging Infrastructure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#challenge-2-implement-signal-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Challenge 2: Implement Signal Handling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#challenge-3-memory-leak-detection-with-valgrind" class="md-nav__link">
    <span class="md-ellipsis">
      
        Challenge 3: Memory Leak Detection with Valgrind
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#challenge-4-create-buildroot-package" class="md-nav__link">
    <span class="md-ellipsis">
      
        Challenge 4: Create Buildroot Package
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#challenge-5-implement-auto-restart-with-systemd" class="md-nav__link">
    <span class="md-ellipsis">
      
        Challenge 5: Implement Auto-Restart with systemd
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-youve-learned" class="md-nav__link">
    <span class="md-ellipsis">
      
        What You've Learned
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#going-further" class="md-nav__link">
    <span class="md-ellipsis">
      
        Going Further
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Going Further">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recommended-reading" class="md-nav__link">
    <span class="md-ellipsis">
      
        Recommended Reading
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Next Steps
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Yocto Project
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Yocto Project
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab10-yocto-first-build/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 10 - First Yocto Build
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab11-yocto-advanced-config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 11 - Advanced Config
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab12-yocto-custom-app/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 12 - Custom Application
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab13-yocto-custom-layer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 13 - Custom Layer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab14-yocto-extend-recipe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 14 - Extend Recipe
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab15-yocto-custom-machine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 15 - Custom Machine
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab16-yocto-custom-image/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 16 - Custom Image
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab17-yocto-app-development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 17 - SDK Development
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yocto/lab18-yocto-devtool/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 18 - Devtool
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Debugging
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Debugging
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debugging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debugging/lab19-system-monitoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 19 - System Monitoring
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debugging/lab20-gdb-debugging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 20 - GDB Debugging
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debugging/lab21-strace-ltrace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 21 - strace/ltrace
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debugging/lab22-valgrind/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 22 - Valgrind
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debugging/lab23-perf-ftrace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 23 - perf & ftrace
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debugging/lab24-ebpf-bcc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 24 - eBPF & BCC
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debugging/lab25-kernel-debugging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 25 - Kernel Debugging
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../debugging/lab26-kdump-kexec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab 26 - kdump & kexec
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../THE-JOURNEY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    The Journey
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ROADMAP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Roadmap
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ARCHITECTURE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../BIBLIOGRAPHY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bibliography
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Submodules
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Submodules
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../submodules/index.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Templates
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Templates
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../templates/lab-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lab Template
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../templates/research-note/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Research Note
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../templates/technical-procedure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Technical Procedure
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Standards
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Standards
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../standards/documentation-standards/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documentation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../CONTRIBUTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#dont-panic" class="md-nav__link">
    <span class="md-ellipsis">
      
        DON'T PANIC
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#objectives" class="md-nav__link">
    <span class="md-ellipsis">
      
        Objectives
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lab-duration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lab Duration
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Application Architecture
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-setup" class="md-nav__link">
    <span class="md-ellipsis">
      
        Environment Setup
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Environment Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#working-directory" class="md-nav__link">
    <span class="md-ellipsis">
      
        Working Directory
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-buildroot-system" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verify Buildroot System
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-1-third-party-library-integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Section 1: Third-Party Library Integration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Section 1: Third-Party Library Integration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#understanding-library-dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Understanding Library Dependencies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-libmpdclient-to-buildroot" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add libmpdclient to Buildroot
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rebuild-buildroot" class="md-nav__link">
    <span class="md-ellipsis">
      
        Rebuild Buildroot
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-library-installation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verify Library Installation
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-2-cross-compiling-with-pkg-config" class="md-nav__link">
    <span class="md-ellipsis">
      
        Section 2: Cross-Compiling with pkg-config
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Section 2: Cross-Compiling with pkg-config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-application-source" class="md-nav__link">
    <span class="md-ellipsis">
      
        Create Application Source
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-pkg-config-for-cross-compilation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configure pkg-config for Cross-Compilation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cross-compile-the-application" class="md-nav__link">
    <span class="md-ellipsis">
      
        Cross-Compile the Application
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-to-target" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deploy to Target
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-on-target" class="md-nav__link">
    <span class="md-ellipsis">
      
        Test on Target
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-3-debugging-with-strace" class="md-nav__link">
    <span class="md-ellipsis">
      
        Section 3: Debugging with strace
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Section 3: Debugging with strace">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-strace-to-buildroot" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add strace to Buildroot
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trace-system-calls" class="md-nav__link">
    <span class="md-ellipsis">
      
        Trace System Calls
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-issues-detected-by-strace" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Issues Detected by strace
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-4-debugging-with-ltrace" class="md-nav__link">
    <span class="md-ellipsis">
      
        Section 4: Debugging with ltrace
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Section 4: Debugging with ltrace">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-ltrace-to-buildroot" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add ltrace to Buildroot
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trace-library-calls" class="md-nav__link">
    <span class="md-ellipsis">
      
        Trace Library Calls
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug-a-crash-with-ltrace" class="md-nav__link">
    <span class="md-ellipsis">
      
        Debug a Crash with ltrace
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-5-remote-debugging-with-gdb-and-gdbserver" class="md-nav__link">
    <span class="md-ellipsis">
      
        Section 5: Remote Debugging with gdb and gdbserver
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Section 5: Remote Debugging with gdb and gdbserver">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-gdb-and-gdbserver-to-buildroot" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add gdb and gdbserver to Buildroot
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compile-application-with-debug-symbols" class="md-nav__link">
    <span class="md-ellipsis">
      
        Compile Application with Debug Symbols
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-gdbserver-on-target" class="md-nav__link">
    <span class="md-ellipsis">
      
        Start gdbserver on Target
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connect-from-host-with-gdb" class="md-nav__link">
    <span class="md-ellipsis">
      
        Connect from Host with gdb
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-6-visual-studio-code-remote-debugging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Section 6: Visual Studio Code Remote Debugging
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Section 6: Visual Studio Code Remote Debugging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-vs-code-extensions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Install VS Code Extensions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prepare-target-for-vs-code-debugging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prepare Target for VS Code Debugging
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-vs-code-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Create VS Code Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug-in-vs-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        Debug in VS Code
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-7-post-mortem-analysis-with-core-dumps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Section 7: Post-Mortem Analysis with Core Dumps
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Section 7: Post-Mortem Analysis with Core Dumps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enable-core-dumps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enable Core Dumps
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#introduce-a-crash" class="md-nav__link">
    <span class="md-ellipsis">
      
        Introduce a Crash
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#collect-core-dump" class="md-nav__link">
    <span class="md-ellipsis">
      
        Collect Core Dump
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#analyze-core-dump" class="md-nav__link">
    <span class="md-ellipsis">
      
        Analyze Core Dump
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-8-system-profiling-with-perf" class="md-nav__link">
    <span class="md-ellipsis">
      
        Section 8: System Profiling with perf
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Section 8: System Profiling with perf">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-perf-to-buildroot" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add perf to Buildroot
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#profile-application" class="md-nav__link">
    <span class="md-ellipsis">
      
        Profile Application
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#system-wide-profiling" class="md-nav__link">
    <span class="md-ellipsis">
      
        System-Wide Profiling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#live-profiling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Live Profiling
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting-guide" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting Guide
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting Guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problem-pkg-config-cant-find-libmpdclient" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problem: pkg-config can't find libmpdclient
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#problem-gdb-cant-find-libraries" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problem: gdb can't find libraries
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#problem-gdbserver-connection-refused" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problem: gdbserver connection refused
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#problem-segmentation-fault-without-useful-info" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problem: Segmentation fault without useful info
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#problem-perf-record-permission-denied" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problem: perf record permission denied
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-challenges" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced Challenges
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Challenges">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#challenge-1-add-logging-infrastructure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Challenge 1: Add Logging Infrastructure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#challenge-2-implement-signal-handling" class="md-nav__link">
    <span class="md-ellipsis">
      
        Challenge 2: Implement Signal Handling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#challenge-3-memory-leak-detection-with-valgrind" class="md-nav__link">
    <span class="md-ellipsis">
      
        Challenge 3: Memory Leak Detection with Valgrind
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#challenge-4-create-buildroot-package" class="md-nav__link">
    <span class="md-ellipsis">
      
        Challenge 4: Create Buildroot Package
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#challenge-5-implement-auto-restart-with-systemd" class="md-nav__link">
    <span class="md-ellipsis">
      
        Challenge 5: Implement Auto-Restart with systemd
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-youve-learned" class="md-nav__link">
    <span class="md-ellipsis">
      
        What You've Learned
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#going-further" class="md-nav__link">
    <span class="md-ellipsis">
      
        Going Further
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Going Further">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recommended-reading" class="md-nav__link">
    <span class="md-ellipsis">
      
        Recommended Reading
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      
        Next Steps
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="lab-9-application-development-and-debugging">Lab 9: Application Development and Debugging<a class="headerlink" href="#lab-9-application-development-and-debugging" title="Permanent link">&para;</a></h1>
<h2 id="dont-panic">DON'T PANIC<a class="headerlink" href="#dont-panic" title="Permanent link">&para;</a></h2>
<p>The Hitchhiker's Guide to Embedded Linux has this to say about debugging:</p>
<p><em>"Debugging is the art of figuring out why your code doesn't work, as opposed to why you thought it would work. This is similar to the difference between what Deep Thought calculated (42) and what everyone expected (a useful answer). Both are technically correct, but only one is helpful."</em></p>
<h2 id="objectives">Objectives<a class="headerlink" href="#objectives" title="Permanent link">&para;</a></h2>
<p>Master cross-platform application development and debugging techniques:</p>
<ul>
<li>Cross-compile standalone applications for ARM64</li>
<li>Use pkg-config for library dependency management</li>
<li>Debug applications with strace and ltrace</li>
<li>Remote debugging with gdb and gdbserver</li>
<li>Visual Studio Code integration for embedded debugging</li>
<li>System profiling with perf</li>
<li>Implement real-world application: Nunchuk-controlled MPD client</li>
<li>Analyze core dumps for post-mortem debugging</li>
</ul>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<ul>
<li>Completed Lab 8 (Buildroot)</li>
<li>Running Buildroot system with NFS root</li>
<li>USB audio device connected</li>
<li>Nunchuk connected to I2C bus</li>
<li>Understanding of C programming</li>
<li>Basic debugging concepts</li>
</ul>
<h2 id="lab-duration">Lab Duration<a class="headerlink" href="#lab-duration" title="Permanent link">&para;</a></h2>
<p>Approximately 5-6 hours</p>
<h2 id="application-architecture">Application Architecture<a class="headerlink" href="#application-architecture" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>           Nunchuk MPD Client Application                     
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>User Input (Nunchuk):                   Audio Output:
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>  Joystick UP     Volume +5%             
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>  Joystick DOWN   Volume -5%               USB Audio  
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>  Joystick LEFT   Previous track            Device    
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>  Joystick RIGHT  Next track             
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>  Z button        Pause/Play                    
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>  C button        Quit client                   
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>                                           
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>                                              MPD     
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>                          (Server)  
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>    Input Layer                          
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>   /dev/input/eventX                           
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>                              
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>                                         
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>                                           libmpdclient
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>                         (Library)  
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>   Nunchuk Client                
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>    Application      MPD Protocol      
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>    (nunchuk-mpd-    (Port 6600)
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>     client)       
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>  
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>Libraries:
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>- libmpdclient: MPD client library
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>- libc (musl): C standard library
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>System Calls:
<a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a>- open(), read(), write()  Input device access
<a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a>- socket(), connect(), send(), recv()  MPD communication
</code></pre></div>
<h2 id="environment-setup">Environment Setup<a class="headerlink" href="#environment-setup" title="Permanent link">&para;</a></h2>
<h3 id="working-directory">Working Directory<a class="headerlink" href="#working-directory" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/embedded-linux-beagleplay-labs
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>mkdir<span class="w"> </span>-p<span class="w"> </span>appdev
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="nb">cd</span><span class="w"> </span>appdev
</code></pre></div>
<h3 id="verify-buildroot-system">Verify Buildroot System<a class="headerlink" href="#verify-buildroot-system" title="Permanent link">&para;</a></h3>
<p>Ensure your BeaglePlay is booted with the Buildroot NFS root from Lab 8:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># On BeaglePlay</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>mount<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>nfs
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="c1"># Verify MPD and Nunchuk</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>ps<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>mpd
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>lsmod<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>nunchuk
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>ls<span class="w"> </span>/dev/input/event*
</code></pre></div>
<h2 id="section-1-third-party-library-integration">Section 1: Third-Party Library Integration<a class="headerlink" href="#section-1-third-party-library-integration" title="Permanent link">&para;</a></h2>
<h3 id="understanding-library-dependencies">Understanding Library Dependencies<a class="headerlink" href="#understanding-library-dependencies" title="Permanent link">&para;</a></h3>
<p>Our application depends on <code>libmpdclient</code> to communicate with MPD. Buildroot hasn't built this yet.</p>
<h3 id="add-libmpdclient-to-buildroot">Add libmpdclient to Buildroot<a class="headerlink" href="#add-libmpdclient-to-buildroot" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/embedded-linux-beagleplay-labs/buildroot-lab/buildroot
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>make<span class="w"> </span>menuconfig
</code></pre></div>
<p><strong>Enable libmpdclient:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>Target packages ---&gt;
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>    Audio and video applications ---&gt;
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>        [*] libmpdclient
</code></pre></div>
<p>Save and exit.</p>
<h3 id="rebuild-buildroot">Rebuild Buildroot<a class="headerlink" href="#rebuild-buildroot" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1"># Incremental build (only libmpdclient and dependencies)</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>make
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="c1"># Update NFS root</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="nb">cd</span><span class="w"> </span>../nfsroot
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>rm<span class="w"> </span>-rf<span class="w"> </span>*
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>tar<span class="w"> </span>xvf<span class="w"> </span>../buildroot/output/images/rootfs.tar
</code></pre></div>
<h3 id="verify-library-installation">Verify Library Installation<a class="headerlink" href="#verify-library-installation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># On BeaglePlay (after reboot)</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>ls<span class="w"> </span>-l<span class="w"> </span>/usr/lib/libmpdclient.*
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="c1"># Expected:</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="c1"># lrwxrwxrwx ... libmpdclient.so -&gt; libmpdclient.so.2</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="c1"># lrwxrwxrwx ... libmpdclient.so.2 -&gt; libmpdclient.so.2.22</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="c1"># -rwxr-xr-x ... libmpdclient.so.2.22</span>
</code></pre></div>
<p><strong>Verification Checklist:</strong></p>
<ul>
<li>[ ] libmpdclient added to Buildroot configuration</li>
<li>[ ] Buildroot rebuilt with libmpdclient</li>
<li>[ ] NFS root updated</li>
<li>[ ] Library files present on target in <code>/usr/lib/</code></li>
</ul>
<h2 id="section-2-cross-compiling-with-pkg-config">Section 2: Cross-Compiling with pkg-config<a class="headerlink" href="#section-2-cross-compiling-with-pkg-config" title="Permanent link">&para;</a></h2>
<h3 id="create-application-source">Create Application Source<a class="headerlink" href="#create-application-source" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/embedded-linux-beagleplay-labs/appdev
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="c1"># Create nunchuk-mpd-client.c</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>vi<span class="w"> </span>nunchuk-mpd-client.c
</code></pre></div>
<p><strong>nunchuk-mpd-client.c:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="cm">/* nunchuk-mpd-client.c - Control MPD playback with Nunchuk */</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string.h&gt;</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;fcntl.h&gt;</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;linux/input.h&gt;</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;mpd/client.h&gt;</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;dirent.h&gt;</span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="cp">#define INPUT_DEVICE_PREFIX &quot;/dev/input/event&quot;</span>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="cm">/* Find Nunchuk input device */</span>
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">find_nunchuk_device</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a><span class="w">    </span><span class="kt">DIR</span><span class="w"> </span><span class="o">*</span><span class="n">dir</span><span class="p">;</span>
<a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">dirent</span><span class="w"> </span><span class="o">*</span><span class="n">entry</span><span class="p">;</span>
<a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a><span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">device_path</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
<a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a><span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">device_name</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span>
<a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">fd</span><span class="p">;</span>
<a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a>
<a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a><span class="w">    </span><span class="n">dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">opendir</span><span class="p">(</span><span class="s">&quot;/dev/input&quot;</span><span class="p">);</span>
<a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">dir</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a><span class="w">        </span><span class="n">perror</span><span class="p">(</span><span class="s">&quot;Failed to open /dev/input&quot;</span><span class="p">);</span>
<a id="__codelineno-8-25" name="__codelineno-8-25" href="#__codelineno-8-25"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<a id="__codelineno-8-26" name="__codelineno-8-26" href="#__codelineno-8-26"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-8-27" name="__codelineno-8-27" href="#__codelineno-8-27"></a>
<a id="__codelineno-8-28" name="__codelineno-8-28" href="#__codelineno-8-28"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="n">entry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">readdir</span><span class="p">(</span><span class="n">dir</span><span class="p">))</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-29" name="__codelineno-8-29" href="#__codelineno-8-29"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">strncmp</span><span class="p">(</span><span class="n">entry</span><span class="o">-&gt;</span><span class="n">d_name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;event&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-8-30" name="__codelineno-8-30" href="#__codelineno-8-30"></a><span class="w">            </span><span class="k">continue</span><span class="p">;</span>
<a id="__codelineno-8-31" name="__codelineno-8-31" href="#__codelineno-8-31"></a>
<a id="__codelineno-8-32" name="__codelineno-8-32" href="#__codelineno-8-32"></a><span class="w">        </span><span class="n">snprintf</span><span class="p">(</span><span class="n">device_path</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">device_path</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;/dev/input/%s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">entry</span><span class="o">-&gt;</span><span class="n">d_name</span><span class="p">);</span>
<a id="__codelineno-8-33" name="__codelineno-8-33" href="#__codelineno-8-33"></a>
<a id="__codelineno-8-34" name="__codelineno-8-34" href="#__codelineno-8-34"></a><span class="w">        </span><span class="n">fd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">open</span><span class="p">(</span><span class="n">device_path</span><span class="p">,</span><span class="w"> </span><span class="n">O_RDONLY</span><span class="p">);</span>
<a id="__codelineno-8-35" name="__codelineno-8-35" href="#__codelineno-8-35"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">fd</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-8-36" name="__codelineno-8-36" href="#__codelineno-8-36"></a><span class="w">            </span><span class="k">continue</span><span class="p">;</span>
<a id="__codelineno-8-37" name="__codelineno-8-37" href="#__codelineno-8-37"></a>
<a id="__codelineno-8-38" name="__codelineno-8-38" href="#__codelineno-8-38"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="n">EVIOCGNAME</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">device_name</span><span class="p">)),</span><span class="w"> </span><span class="n">device_name</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-39" name="__codelineno-8-39" href="#__codelineno-8-39"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">strstr</span><span class="p">(</span><span class="n">device_name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Nunchuk&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-40" name="__codelineno-8-40" href="#__codelineno-8-40"></a><span class="w">                </span><span class="n">closedir</span><span class="p">(</span><span class="n">dir</span><span class="p">);</span>
<a id="__codelineno-8-41" name="__codelineno-8-41" href="#__codelineno-8-41"></a><span class="w">                </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Found Nunchuk at %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">device_path</span><span class="p">);</span>
<a id="__codelineno-8-42" name="__codelineno-8-42" href="#__codelineno-8-42"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">fd</span><span class="p">;</span>
<a id="__codelineno-8-43" name="__codelineno-8-43" href="#__codelineno-8-43"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-8-44" name="__codelineno-8-44" href="#__codelineno-8-44"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-8-45" name="__codelineno-8-45" href="#__codelineno-8-45"></a>
<a id="__codelineno-8-46" name="__codelineno-8-46" href="#__codelineno-8-46"></a><span class="w">        </span><span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">);</span>
<a id="__codelineno-8-47" name="__codelineno-8-47" href="#__codelineno-8-47"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-8-48" name="__codelineno-8-48" href="#__codelineno-8-48"></a>
<a id="__codelineno-8-49" name="__codelineno-8-49" href="#__codelineno-8-49"></a><span class="w">    </span><span class="n">closedir</span><span class="p">(</span><span class="n">dir</span><span class="p">);</span>
<a id="__codelineno-8-50" name="__codelineno-8-50" href="#__codelineno-8-50"></a><span class="w">    </span><span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ERROR: didn&#39;t manage to find the Nunchuk device in /dev/input. &quot;</span>
<a id="__codelineno-8-51" name="__codelineno-8-51" href="#__codelineno-8-51"></a><span class="w">                    </span><span class="s">&quot;Is the Nunchuk driver loaded?</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<a id="__codelineno-8-52" name="__codelineno-8-52" href="#__codelineno-8-52"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
<a id="__codelineno-8-53" name="__codelineno-8-53" href="#__codelineno-8-53"></a><span class="p">}</span>
<a id="__codelineno-8-54" name="__codelineno-8-54" href="#__codelineno-8-54"></a>
<a id="__codelineno-8-55" name="__codelineno-8-55" href="#__codelineno-8-55"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-56" name="__codelineno-8-56" href="#__codelineno-8-56"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">input_event</span><span class="w"> </span><span class="n">ev</span><span class="p">;</span>
<a id="__codelineno-8-57" name="__codelineno-8-57" href="#__codelineno-8-57"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">nunchuk_fd</span><span class="p">;</span>
<a id="__codelineno-8-58" name="__codelineno-8-58" href="#__codelineno-8-58"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">mpd_connection</span><span class="w"> </span><span class="o">*</span><span class="n">conn</span><span class="p">;</span>
<a id="__codelineno-8-59" name="__codelineno-8-59" href="#__codelineno-8-59"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">joystick_x_prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-8-60" name="__codelineno-8-60" href="#__codelineno-8-60"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">joystick_y_prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-8-61" name="__codelineno-8-61" href="#__codelineno-8-61"></a>
<a id="__codelineno-8-62" name="__codelineno-8-62" href="#__codelineno-8-62"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Nunchuk MPD Client starting...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<a id="__codelineno-8-63" name="__codelineno-8-63" href="#__codelineno-8-63"></a>
<a id="__codelineno-8-64" name="__codelineno-8-64" href="#__codelineno-8-64"></a><span class="w">    </span><span class="cm">/* Find and open Nunchuk device */</span>
<a id="__codelineno-8-65" name="__codelineno-8-65" href="#__codelineno-8-65"></a><span class="w">    </span><span class="n">nunchuk_fd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">find_nunchuk_device</span><span class="p">();</span>
<a id="__codelineno-8-66" name="__codelineno-8-66" href="#__codelineno-8-66"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">nunchuk_fd</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-67" name="__codelineno-8-67" href="#__codelineno-8-67"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">EXIT_FAILURE</span><span class="p">;</span>
<a id="__codelineno-8-68" name="__codelineno-8-68" href="#__codelineno-8-68"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-8-69" name="__codelineno-8-69" href="#__codelineno-8-69"></a>
<a id="__codelineno-8-70" name="__codelineno-8-70" href="#__codelineno-8-70"></a><span class="w">    </span><span class="cm">/* Connect to MPD */</span>
<a id="__codelineno-8-71" name="__codelineno-8-71" href="#__codelineno-8-71"></a><span class="w">    </span><span class="n">conn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mpd_connection_new</span><span class="p">(</span><span class="s">&quot;localhost&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">6600</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-8-72" name="__codelineno-8-72" href="#__codelineno-8-72"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">conn</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-73" name="__codelineno-8-73" href="#__codelineno-8-73"></a><span class="w">        </span><span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Failed to create MPD connection</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<a id="__codelineno-8-74" name="__codelineno-8-74" href="#__codelineno-8-74"></a><span class="w">        </span><span class="n">close</span><span class="p">(</span><span class="n">nunchuk_fd</span><span class="p">);</span>
<a id="__codelineno-8-75" name="__codelineno-8-75" href="#__codelineno-8-75"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">EXIT_FAILURE</span><span class="p">;</span>
<a id="__codelineno-8-76" name="__codelineno-8-76" href="#__codelineno-8-76"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-8-77" name="__codelineno-8-77" href="#__codelineno-8-77"></a>
<a id="__codelineno-8-78" name="__codelineno-8-78" href="#__codelineno-8-78"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mpd_connection_get_error</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">MPD_ERROR_SUCCESS</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-79" name="__codelineno-8-79" href="#__codelineno-8-79"></a><span class="w">        </span><span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;MPD connection error: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<a id="__codelineno-8-80" name="__codelineno-8-80" href="#__codelineno-8-80"></a><span class="w">                </span><span class="n">mpd_connection_get_error_message</span><span class="p">(</span><span class="n">conn</span><span class="p">));</span>
<a id="__codelineno-8-81" name="__codelineno-8-81" href="#__codelineno-8-81"></a><span class="w">        </span><span class="n">mpd_connection_free</span><span class="p">(</span><span class="n">conn</span><span class="p">);</span>
<a id="__codelineno-8-82" name="__codelineno-8-82" href="#__codelineno-8-82"></a><span class="w">        </span><span class="n">close</span><span class="p">(</span><span class="n">nunchuk_fd</span><span class="p">);</span>
<a id="__codelineno-8-83" name="__codelineno-8-83" href="#__codelineno-8-83"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">EXIT_FAILURE</span><span class="p">;</span>
<a id="__codelineno-8-84" name="__codelineno-8-84" href="#__codelineno-8-84"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-8-85" name="__codelineno-8-85" href="#__codelineno-8-85"></a>
<a id="__codelineno-8-86" name="__codelineno-8-86" href="#__codelineno-8-86"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Connected to MPD. Use Nunchuk to control playback:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<a id="__codelineno-8-87" name="__codelineno-8-87" href="#__codelineno-8-87"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;  Joystick UP:    Volume +5%%</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<a id="__codelineno-8-88" name="__codelineno-8-88" href="#__codelineno-8-88"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;  Joystick DOWN:  Volume -5%%</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<a id="__codelineno-8-89" name="__codelineno-8-89" href="#__codelineno-8-89"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;  Joystick LEFT:  Previous track</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<a id="__codelineno-8-90" name="__codelineno-8-90" href="#__codelineno-8-90"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;  Joystick RIGHT: Next track</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<a id="__codelineno-8-91" name="__codelineno-8-91" href="#__codelineno-8-91"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;  Z button:       Pause/Play</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<a id="__codelineno-8-92" name="__codelineno-8-92" href="#__codelineno-8-92"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;  C button:       Quit</span><span class="se">\n\n</span><span class="s">&quot;</span><span class="p">);</span>
<a id="__codelineno-8-93" name="__codelineno-8-93" href="#__codelineno-8-93"></a>
<a id="__codelineno-8-94" name="__codelineno-8-94" href="#__codelineno-8-94"></a><span class="w">    </span><span class="cm">/* Event loop */</span>
<a id="__codelineno-8-95" name="__codelineno-8-95" href="#__codelineno-8-95"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-96" name="__codelineno-8-96" href="#__codelineno-8-96"></a><span class="w">        </span><span class="kt">ssize_t</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read</span><span class="p">(</span><span class="n">nunchuk_fd</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">ev</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">ev</span><span class="p">));</span>
<a id="__codelineno-8-97" name="__codelineno-8-97" href="#__codelineno-8-97"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">bytes</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">ev</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-98" name="__codelineno-8-98" href="#__codelineno-8-98"></a><span class="w">            </span><span class="n">perror</span><span class="p">(</span><span class="s">&quot;read&quot;</span><span class="p">);</span>
<a id="__codelineno-8-99" name="__codelineno-8-99" href="#__codelineno-8-99"></a><span class="w">            </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-8-100" name="__codelineno-8-100" href="#__codelineno-8-100"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-8-101" name="__codelineno-8-101" href="#__codelineno-8-101"></a>
<a id="__codelineno-8-102" name="__codelineno-8-102" href="#__codelineno-8-102"></a><span class="w">        </span><span class="cm">/* Process only key and absolute axis events */</span>
<a id="__codelineno-8-103" name="__codelineno-8-103" href="#__codelineno-8-103"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ev</span><span class="p">.</span><span class="n">type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">EV_KEY</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">ev</span><span class="p">.</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="cm">/* Button press */</span>
<a id="__codelineno-8-104" name="__codelineno-8-104" href="#__codelineno-8-104"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ev</span><span class="p">.</span><span class="n">code</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">BTN_Z</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-105" name="__codelineno-8-105" href="#__codelineno-8-105"></a><span class="w">                </span><span class="cm">/* Z button: toggle pause/play */</span>
<a id="__codelineno-8-106" name="__codelineno-8-106" href="#__codelineno-8-106"></a><span class="w">                </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Z pressed: Toggle playback</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<a id="__codelineno-8-107" name="__codelineno-8-107" href="#__codelineno-8-107"></a><span class="w">                </span><span class="n">mpd_run_toggle_pause</span><span class="p">(</span><span class="n">conn</span><span class="p">);</span>
<a id="__codelineno-8-108" name="__codelineno-8-108" href="#__codelineno-8-108"></a><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ev</span><span class="p">.</span><span class="n">code</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">BTN_C</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-109" name="__codelineno-8-109" href="#__codelineno-8-109"></a><span class="w">                </span><span class="cm">/* C button: quit */</span>
<a id="__codelineno-8-110" name="__codelineno-8-110" href="#__codelineno-8-110"></a><span class="w">                </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;C pressed: Quitting</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<a id="__codelineno-8-111" name="__codelineno-8-111" href="#__codelineno-8-111"></a><span class="w">                </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-8-112" name="__codelineno-8-112" href="#__codelineno-8-112"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-8-113" name="__codelineno-8-113" href="#__codelineno-8-113"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ev</span><span class="p">.</span><span class="n">type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">EV_ABS</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="cm">/* Joystick movement */</span>
<a id="__codelineno-8-114" name="__codelineno-8-114" href="#__codelineno-8-114"></a><span class="w">            </span><span class="k">struct</span><span class="w"> </span><span class="nc">mpd_status</span><span class="w"> </span><span class="o">*</span><span class="n">status</span><span class="p">;</span>
<a id="__codelineno-8-115" name="__codelineno-8-115" href="#__codelineno-8-115"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">volume</span><span class="p">;</span>
<a id="__codelineno-8-116" name="__codelineno-8-116" href="#__codelineno-8-116"></a>
<a id="__codelineno-8-117" name="__codelineno-8-117" href="#__codelineno-8-117"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ev</span><span class="p">.</span><span class="n">code</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ABS_Y</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-118" name="__codelineno-8-118" href="#__codelineno-8-118"></a><span class="w">                </span><span class="cm">/* Joystick Y axis: volume control */</span>
<a id="__codelineno-8-119" name="__codelineno-8-119" href="#__codelineno-8-119"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ev</span><span class="p">.</span><span class="n">value</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">joystick_y_prev</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-120" name="__codelineno-8-120" href="#__codelineno-8-120"></a><span class="w">                    </span><span class="cm">/* DOWN */</span>
<a id="__codelineno-8-121" name="__codelineno-8-121" href="#__codelineno-8-121"></a><span class="w">                    </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mpd_run_status</span><span class="p">(</span><span class="n">conn</span><span class="p">);</span>
<a id="__codelineno-8-122" name="__codelineno-8-122" href="#__codelineno-8-122"></a><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">status</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-123" name="__codelineno-8-123" href="#__codelineno-8-123"></a><span class="w">                        </span><span class="n">volume</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mpd_status_get_volume</span><span class="p">(</span><span class="n">status</span><span class="p">);</span>
<a id="__codelineno-8-124" name="__codelineno-8-124" href="#__codelineno-8-124"></a><span class="w">                        </span><span class="n">mpd_status_free</span><span class="p">(</span><span class="n">status</span><span class="p">);</span>
<a id="__codelineno-8-125" name="__codelineno-8-125" href="#__codelineno-8-125"></a>
<a id="__codelineno-8-126" name="__codelineno-8-126" href="#__codelineno-8-126"></a><span class="w">                        </span><span class="n">volume</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<a id="__codelineno-8-127" name="__codelineno-8-127" href="#__codelineno-8-127"></a><span class="w">                        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">volume</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="n">volume</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-8-128" name="__codelineno-8-128" href="#__codelineno-8-128"></a>
<a id="__codelineno-8-129" name="__codelineno-8-129" href="#__codelineno-8-129"></a><span class="w">                        </span><span class="n">mpd_run_set_volume</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span><span class="w"> </span><span class="n">volume</span><span class="p">);</span>
<a id="__codelineno-8-130" name="__codelineno-8-130" href="#__codelineno-8-130"></a><span class="w">                        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Volume down: %d%%</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">volume</span><span class="p">);</span>
<a id="__codelineno-8-131" name="__codelineno-8-131" href="#__codelineno-8-131"></a><span class="w">                    </span><span class="p">}</span>
<a id="__codelineno-8-132" name="__codelineno-8-132" href="#__codelineno-8-132"></a><span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ev</span><span class="p">.</span><span class="n">value</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">150</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">joystick_y_prev</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">150</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-133" name="__codelineno-8-133" href="#__codelineno-8-133"></a><span class="w">                    </span><span class="cm">/* UP */</span>
<a id="__codelineno-8-134" name="__codelineno-8-134" href="#__codelineno-8-134"></a><span class="w">                    </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mpd_run_status</span><span class="p">(</span><span class="n">conn</span><span class="p">);</span>
<a id="__codelineno-8-135" name="__codelineno-8-135" href="#__codelineno-8-135"></a><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">status</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-136" name="__codelineno-8-136" href="#__codelineno-8-136"></a><span class="w">                        </span><span class="n">volume</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mpd_status_get_volume</span><span class="p">(</span><span class="n">status</span><span class="p">);</span>
<a id="__codelineno-8-137" name="__codelineno-8-137" href="#__codelineno-8-137"></a><span class="w">                        </span><span class="n">mpd_status_free</span><span class="p">(</span><span class="n">status</span><span class="p">);</span>
<a id="__codelineno-8-138" name="__codelineno-8-138" href="#__codelineno-8-138"></a>
<a id="__codelineno-8-139" name="__codelineno-8-139" href="#__codelineno-8-139"></a><span class="w">                        </span><span class="n">volume</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<a id="__codelineno-8-140" name="__codelineno-8-140" href="#__codelineno-8-140"></a><span class="w">                        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">volume</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="n">volume</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span>
<a id="__codelineno-8-141" name="__codelineno-8-141" href="#__codelineno-8-141"></a>
<a id="__codelineno-8-142" name="__codelineno-8-142" href="#__codelineno-8-142"></a><span class="w">                        </span><span class="n">mpd_run_set_volume</span><span class="p">(</span><span class="n">conn</span><span class="p">,</span><span class="w"> </span><span class="n">volume</span><span class="p">);</span>
<a id="__codelineno-8-143" name="__codelineno-8-143" href="#__codelineno-8-143"></a><span class="w">                        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Volume up: %d%%</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">volume</span><span class="p">);</span>
<a id="__codelineno-8-144" name="__codelineno-8-144" href="#__codelineno-8-144"></a><span class="w">                    </span><span class="p">}</span>
<a id="__codelineno-8-145" name="__codelineno-8-145" href="#__codelineno-8-145"></a><span class="w">                </span><span class="p">}</span>
<a id="__codelineno-8-146" name="__codelineno-8-146" href="#__codelineno-8-146"></a><span class="w">                </span><span class="n">joystick_y_prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ev</span><span class="p">.</span><span class="n">value</span><span class="p">;</span>
<a id="__codelineno-8-147" name="__codelineno-8-147" href="#__codelineno-8-147"></a><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ev</span><span class="p">.</span><span class="n">code</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ABS_X</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-148" name="__codelineno-8-148" href="#__codelineno-8-148"></a><span class="w">                </span><span class="cm">/* Joystick X axis: track navigation */</span>
<a id="__codelineno-8-149" name="__codelineno-8-149" href="#__codelineno-8-149"></a><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ev</span><span class="p">.</span><span class="n">value</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">joystick_x_prev</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">80</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-150" name="__codelineno-8-150" href="#__codelineno-8-150"></a><span class="w">                    </span><span class="cm">/* LEFT */</span>
<a id="__codelineno-8-151" name="__codelineno-8-151" href="#__codelineno-8-151"></a><span class="w">                    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Previous track</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<a id="__codelineno-8-152" name="__codelineno-8-152" href="#__codelineno-8-152"></a><span class="w">                    </span><span class="n">mpd_run_previous</span><span class="p">(</span><span class="n">conn</span><span class="p">);</span>
<a id="__codelineno-8-153" name="__codelineno-8-153" href="#__codelineno-8-153"></a><span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ev</span><span class="p">.</span><span class="n">value</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">180</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">joystick_x_prev</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">180</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-154" name="__codelineno-8-154" href="#__codelineno-8-154"></a><span class="w">                    </span><span class="cm">/* RIGHT */</span>
<a id="__codelineno-8-155" name="__codelineno-8-155" href="#__codelineno-8-155"></a><span class="w">                    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Next track</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<a id="__codelineno-8-156" name="__codelineno-8-156" href="#__codelineno-8-156"></a><span class="w">                    </span><span class="n">mpd_run_next</span><span class="p">(</span><span class="n">conn</span><span class="p">);</span>
<a id="__codelineno-8-157" name="__codelineno-8-157" href="#__codelineno-8-157"></a><span class="w">                </span><span class="p">}</span>
<a id="__codelineno-8-158" name="__codelineno-8-158" href="#__codelineno-8-158"></a><span class="w">                </span><span class="n">joystick_x_prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ev</span><span class="p">.</span><span class="n">value</span><span class="p">;</span>
<a id="__codelineno-8-159" name="__codelineno-8-159" href="#__codelineno-8-159"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-8-160" name="__codelineno-8-160" href="#__codelineno-8-160"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-8-161" name="__codelineno-8-161" href="#__codelineno-8-161"></a>
<a id="__codelineno-8-162" name="__codelineno-8-162" href="#__codelineno-8-162"></a><span class="w">        </span><span class="cm">/* Check for MPD errors */</span>
<a id="__codelineno-8-163" name="__codelineno-8-163" href="#__codelineno-8-163"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">mpd_connection_get_error</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">MPD_ERROR_SUCCESS</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-164" name="__codelineno-8-164" href="#__codelineno-8-164"></a><span class="w">            </span><span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;MPD error: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<a id="__codelineno-8-165" name="__codelineno-8-165" href="#__codelineno-8-165"></a><span class="w">                    </span><span class="n">mpd_connection_get_error_message</span><span class="p">(</span><span class="n">conn</span><span class="p">));</span>
<a id="__codelineno-8-166" name="__codelineno-8-166" href="#__codelineno-8-166"></a><span class="w">            </span><span class="n">mpd_connection_clear_error</span><span class="p">(</span><span class="n">conn</span><span class="p">);</span>
<a id="__codelineno-8-167" name="__codelineno-8-167" href="#__codelineno-8-167"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-8-168" name="__codelineno-8-168" href="#__codelineno-8-168"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-8-169" name="__codelineno-8-169" href="#__codelineno-8-169"></a>
<a id="__codelineno-8-170" name="__codelineno-8-170" href="#__codelineno-8-170"></a><span class="w">    </span><span class="cm">/* Cleanup */</span>
<a id="__codelineno-8-171" name="__codelineno-8-171" href="#__codelineno-8-171"></a><span class="w">    </span><span class="n">mpd_connection_free</span><span class="p">(</span><span class="n">conn</span><span class="p">);</span>
<a id="__codelineno-8-172" name="__codelineno-8-172" href="#__codelineno-8-172"></a><span class="w">    </span><span class="n">close</span><span class="p">(</span><span class="n">nunchuk_fd</span><span class="p">);</span>
<a id="__codelineno-8-173" name="__codelineno-8-173" href="#__codelineno-8-173"></a>
<a id="__codelineno-8-174" name="__codelineno-8-174" href="#__codelineno-8-174"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Client terminated.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<a id="__codelineno-8-175" name="__codelineno-8-175" href="#__codelineno-8-175"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">EXIT_SUCCESS</span><span class="p">;</span>
<a id="__codelineno-8-176" name="__codelineno-8-176" href="#__codelineno-8-176"></a><span class="p">}</span>
</code></pre></div>
<h3 id="configure-pkg-config-for-cross-compilation">Configure pkg-config for Cross-Compilation<a class="headerlink" href="#configure-pkg-config-for-cross-compilation" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1"># Set PKG_CONFIG_LIBDIR to point to target libraries</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="nb">export</span><span class="w"> </span><span class="nv">PKG_CONFIG_LIBDIR</span><span class="o">=</span><span class="nv">$HOME</span>/embedded-linux-beagleplay-labs/buildroot-lab/buildroot/output/staging/usr/lib/pkgconfig
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="c1"># Set PKG_CONFIG_SYSROOT_DIR</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="nb">export</span><span class="w"> </span><span class="nv">PKG_CONFIG_SYSROOT_DIR</span><span class="o">=</span><span class="nv">$HOME</span>/embedded-linux-beagleplay-labs/buildroot-lab/buildroot/output/staging
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="c1"># Test pkg-config</span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>pkg-config<span class="w"> </span>--cflags<span class="w"> </span>--libs<span class="w"> </span>libmpdclient
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="c1"># Expected output:</span>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="c1"># -I/home/&lt;user&gt;/.../output/staging/usr/include -L/home/&lt;user&gt;/.../output/staging/usr/lib -lmpdclient</span>
</code></pre></div>
<h3 id="cross-compile-the-application">Cross-Compile the Application<a class="headerlink" href="#cross-compile-the-application" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/embedded-linux-beagleplay-labs/appdev
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="c1"># Set cross-compiler</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$HOME</span>/x-tools/aarch64-beagleplay-linux-musl/bin:<span class="nv">$PATH</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="c1"># Compile</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>aarch64-beagleplay-linux-musl-gcc<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">    </span>-o<span class="w"> </span>nunchuk-mpd-client<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">    </span>nunchuk-mpd-client.c<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">    </span><span class="k">$(</span>pkg-config<span class="w"> </span>--cflags<span class="w"> </span>--libs<span class="w"> </span>libmpdclient<span class="k">)</span>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="c1"># Verify it&#39;s ARM64</span>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>file<span class="w"> </span>nunchuk-mpd-client
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="c1"># Expected:</span>
<a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="c1"># nunchuk-mpd-client: ELF 64-bit LSB executable, ARM aarch64, ...</span>
</code></pre></div>
<h3 id="deploy-to-target">Deploy to Target<a class="headerlink" href="#deploy-to-target" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1"># Copy to NFS root</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>cp<span class="w"> </span>nunchuk-mpd-client<span class="w"> </span><span class="nv">$HOME</span>/embedded-linux-beagleplay-labs/buildroot-lab/nfsroot/root/
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="c1"># Strip to reduce size</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>aarch64-beagleplay-linux-musl-strip<span class="w"> </span><span class="nv">$HOME</span>/embedded-linux-beagleplay-labs/buildroot-lab/nfsroot/root/nunchuk-mpd-client
</code></pre></div>
<h3 id="test-on-target">Test on Target<a class="headerlink" href="#test-on-target" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="c1"># On BeaglePlay</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="c1"># Ensure MPD is running and has music</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>mpc<span class="w"> </span>update
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>mpc<span class="w"> </span>add<span class="w"> </span>/
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>mpc<span class="w"> </span>play
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="c1"># Run client</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>/root/nunchuk-mpd-client
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="c1"># Use Nunchuk to control playback!</span>
</code></pre></div>
<p><strong>Verification Checklist:</strong></p>
<ul>
<li>[ ] Application source code created</li>
<li>[ ] pkg-config configured for cross-compilation</li>
<li>[ ] Application compiled successfully for ARM64</li>
<li>[ ] Binary deployed to NFS root</li>
<li>[ ] Application runs on target</li>
<li>[ ] Nunchuk controls work (volume, track navigation, pause, quit)</li>
</ul>
<h2 id="section-3-debugging-with-strace">Section 3: Debugging with strace<a class="headerlink" href="#section-3-debugging-with-strace" title="Permanent link">&para;</a></h2>
<p>If the application doesn't work, let's debug it systematically.</p>
<h3 id="add-strace-to-buildroot">Add strace to Buildroot<a class="headerlink" href="#add-strace-to-buildroot" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/embedded-linux-beagleplay-labs/buildroot-lab/buildroot
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>make<span class="w"> </span>menuconfig
</code></pre></div>
<p><strong>Enable strace:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>Target packages ---&gt;
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>    Debugging, profiling and benchmark ---&gt;
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>        [*] strace
</code></pre></div>
<p>Save, rebuild, update NFS root.</p>
<h3 id="trace-system-calls">Trace System Calls<a class="headerlink" href="#trace-system-calls" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="c1"># On BeaglePlay</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="c1"># Run application through strace</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>strace<span class="w"> </span>/root/nunchuk-mpd-client
</code></pre></div>
<p><strong>Expected Output (partial):</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>execve(&quot;/root/nunchuk-mpd-client&quot;, [&quot;/root/nunchuk-mpd-client&quot;], ...) = 0
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>...
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>openat(AT_FDCWD, &quot;/dev/input&quot;, O_RDONLY|O_DIRECTORY) = 3
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>getdents64(3, /* entries */, 1024) = ...
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>openat(AT_FDCWD, &quot;/dev/input/event0&quot;, O_RDONLY) = 4
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>ioctl(4, EVIOCGNAME(256), &quot;gpio-keys&quot;) = 10
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>close(4) = 0
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>openat(AT_FDCWD, &quot;/dev/input/event5&quot;, O_RDONLY) = 4
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>ioctl(4, EVIOCGNAME(256), &quot;Wii Nunchuk&quot;) = 12
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>socket(AF_INET, SOCK_STREAM, IPPROTO_TCP) = 5
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>connect(5, {sa_family=AF_INET, sin_port=htons(6600), sin_addr=inet_addr(&quot;127.0.0.1&quot;)}, 16) = 0
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>...
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>read(4, ..., 24) = 24   # Reading from Nunchuk
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a>write(5, &quot;noidle\n&quot;, 7) = 7   # Writing to MPD
</code></pre></div>
<p><strong>Key Observations:</strong></p>
<ul>
<li><code>openat("/dev/input", ...)</code>: Scanning for input devices</li>
<li><code>ioctl(EVIOCGNAME, ...)</code>: Querying device names</li>
<li><code>socket(...AF_INET...)</code> + <code>connect(...)</code>: MPD connection</li>
<li><code>read(4, ...)</code>: Reading Nunchuk events</li>
<li><code>write(5, ...)</code>: Sending MPD commands</li>
</ul>
<h3 id="common-issues-detected-by-strace">Common Issues Detected by strace<a class="headerlink" href="#common-issues-detected-by-strace" title="Permanent link">&para;</a></h3>
<p><strong>Problem: Can't find Nunchuk</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>openat(AT_FDCWD, &quot;/dev/input&quot;, O_RDONLY|O_DIRECTORY) = -1 ENOENT (No such file or directory)
</code></pre></div>
<p><strong>Solution:</strong> Mount devtmpfs or create <code>/dev/input</code></p>
<p><strong>Problem: Permission denied</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>openat(AT_FDCWD, &quot;/dev/input/event5&quot;, O_RDONLY) = -1 EACCES (Permission denied)
</code></pre></div>
<p><strong>Solution:</strong> Run as root or adjust permissions</p>
<p><strong>Problem: MPD connection refused</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>connect(5, {sa_family=AF_INET, ...}, 16) = -1 ECONNREFUSED (Connection refused)
</code></pre></div>
<p><strong>Solution:</strong> Start MPD service</p>
<p><strong>Verification Checklist:</strong></p>
<ul>
<li>[ ] strace installed via Buildroot</li>
<li>[ ] Application traced successfully</li>
<li>[ ] System calls visible and understood</li>
<li>[ ] Used strace to diagnose issues</li>
</ul>
<h2 id="section-4-debugging-with-ltrace">Section 4: Debugging with ltrace<a class="headerlink" href="#section-4-debugging-with-ltrace" title="Permanent link">&para;</a></h2>
<h3 id="add-ltrace-to-buildroot">Add ltrace to Buildroot<a class="headerlink" href="#add-ltrace-to-buildroot" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/embedded-linux-beagleplay-labs/buildroot-lab/buildroot
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>make<span class="w"> </span>menuconfig
</code></pre></div>
<p><strong>Enable ltrace:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>Target packages ---&gt;
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>    Debugging, profiling and benchmark ---&gt;
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>        [*] ltrace
</code></pre></div>
<p>Rebuild and update NFS root.</p>
<h3 id="trace-library-calls">Trace Library Calls<a class="headerlink" href="#trace-library-calls" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="c1"># On BeaglePlay</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>ltrace<span class="w"> </span>/root/nunchuk-mpd-client
</code></pre></div>
<p><strong>Expected Output (partial):</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>mpd_connection_new(&quot;localhost&quot;, 6600, 0) = 0x...
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>mpd_connection_get_error(0x...) = MPD_ERROR_SUCCESS
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>mpd_run_status(0x...) = 0x...
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>mpd_status_get_volume(0x...) = 75
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>mpd_status_free(0x...)
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>mpd_run_set_volume(0x..., 80) = 1
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>mpd_run_toggle_pause(0x...) = 1
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a>mpd_run_next(0x...) = 1
<a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>mpd_connection_free(0x...)
</code></pre></div>
<p><strong>Key Observations:</strong></p>
<ul>
<li>All <code>mpd_*</code> function calls from libmpdclient are visible</li>
<li>Return values shown (helpful for debugging)</li>
<li>Can see actual parameters passed</li>
</ul>
<h3 id="debug-a-crash-with-ltrace">Debug a Crash with ltrace<a class="headerlink" href="#debug-a-crash-with-ltrace" title="Permanent link">&para;</a></h3>
<p>Let's intentionally introduce a bug to see ltrace in action.</p>
<p><strong>Modified code (buggy version):</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="cm">/* In main(), after creating connection */</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="n">mpd_connection_free</span><span class="p">(</span><span class="n">conn</span><span class="p">);</span><span class="w">  </span><span class="cm">/* BUG: Free too early! */</span>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="cm">/* Then later when trying to use conn... */</span>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="n">mpd_run_toggle_pause</span><span class="p">(</span><span class="n">conn</span><span class="p">);</span><span class="w">  </span><span class="cm">/* CRASH: Use-after-free */</span>
</code></pre></div>
<p><strong>Run with ltrace:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>ltrace<span class="w"> </span>/root/nunchuk-mpd-client
</code></pre></div>
<p><strong>Output shows:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>mpd_connection_free(0x12345678) = &lt;void&gt;
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>...
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>mpd_run_toggle_pause(0x12345678) = +++ killed by SIGSEGV +++
</code></pre></div>
<p>This clearly shows the sequence: connection freed, then accessed  crash!</p>
<p><strong>Verification Checklist:</strong></p>
<ul>
<li>[ ] ltrace installed via Buildroot</li>
<li>[ ] Library calls traced successfully</li>
<li>[ ] Used ltrace to understand call sequence</li>
<li>[ ] Debugged library-related issues</li>
</ul>
<h2 id="section-5-remote-debugging-with-gdb-and-gdbserver">Section 5: Remote Debugging with gdb and gdbserver<a class="headerlink" href="#section-5-remote-debugging-with-gdb-and-gdbserver" title="Permanent link">&para;</a></h2>
<h3 id="add-gdb-and-gdbserver-to-buildroot">Add gdb and gdbserver to Buildroot<a class="headerlink" href="#add-gdb-and-gdbserver-to-buildroot" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/embedded-linux-beagleplay-labs/buildroot-lab/buildroot
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>make<span class="w"> </span>menuconfig
</code></pre></div>
<p><strong>Enable debugging tools:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>Target packages ---&gt;
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>    Debugging, profiling and benchmark ---&gt;
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>        [*] gdb
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>            [*] gdbserver
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>            [*] full debugger
</code></pre></div>
<p><strong>Toolchain options:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>Toolchain ---&gt;
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>    [*] Build cross gdb for the host
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>        # This gives you aarch64-linux-gdb on your workstation
</code></pre></div>
<p>Rebuild and update NFS root.</p>
<h3 id="compile-application-with-debug-symbols">Compile Application with Debug Symbols<a class="headerlink" href="#compile-application-with-debug-symbols" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/embedded-linux-beagleplay-labs/appdev
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="c1"># Compile with -g flag (debug symbols)</span>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>aarch64-beagleplay-linux-musl-gcc<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="w">    </span>-g<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a><span class="w">    </span>-o<span class="w"> </span>nunchuk-mpd-client-debug<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a><span class="w">    </span>nunchuk-mpd-client.c<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a><span class="w">    </span><span class="k">$(</span>pkg-config<span class="w"> </span>--cflags<span class="w"> </span>--libs<span class="w"> </span>libmpdclient<span class="k">)</span>
<a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a>
<a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a><span class="c1"># Deploy non-stripped version</span>
<a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a>cp<span class="w"> </span>nunchuk-mpd-client-debug<span class="w"> </span><span class="nv">$HOME</span>/embedded-linux-beagleplay-labs/buildroot-lab/nfsroot/root/
</code></pre></div>
<h3 id="start-gdbserver-on-target">Start gdbserver on Target<a class="headerlink" href="#start-gdbserver-on-target" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="c1"># On BeaglePlay</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>gdbserver<span class="w"> </span>:2345<span class="w"> </span>/root/nunchuk-mpd-client-debug
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="c1"># gdbserver listens on TCP port 2345</span>
</code></pre></div>
<h3 id="connect-from-host-with-gdb">Connect from Host with gdb<a class="headerlink" href="#connect-from-host-with-gdb" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="c1"># On workstation</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/embedded-linux-beagleplay-labs/appdev
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="c1"># Use cross-gdb</span>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a>aarch64-beagleplay-linux-musl-gdb<span class="w"> </span>nunchuk-mpd-client-debug
</code></pre></div>
<p><strong>In gdb:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>(gdb) set sysroot /home/&lt;user&gt;/embedded-linux-beagleplay-labs/buildroot-lab/buildroot/output/staging
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>(gdb) target remote 192.168.0.100:2345
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>(gdb) break main
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a>Breakpoint 1 at 0x...: file nunchuk-mpd-client.c, line 50.
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a>
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a>(gdb) continue
<a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a>Continuing.
<a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a>
<a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a>Breakpoint 1, main (argc=1, argv=0x...) at nunchuk-mpd-client.c:50
<a id="__codelineno-33-12" name="__codelineno-33-12" href="#__codelineno-33-12"></a>50          printf(&quot;Nunchuk MPD Client starting...\n&quot;);
<a id="__codelineno-33-13" name="__codelineno-33-13" href="#__codelineno-33-13"></a>
<a id="__codelineno-33-14" name="__codelineno-33-14" href="#__codelineno-33-14"></a>(gdb) next
<a id="__codelineno-33-15" name="__codelineno-33-15" href="#__codelineno-33-15"></a>51          nunchuk_fd = find_nunchuk_device();
<a id="__codelineno-33-16" name="__codelineno-33-16" href="#__codelineno-33-16"></a>
<a id="__codelineno-33-17" name="__codelineno-33-17" href="#__codelineno-33-17"></a>(gdb) step
<a id="__codelineno-33-18" name="__codelineno-33-18" href="#__codelineno-33-18"></a>find_nunchuk_device () at nunchuk-mpd-client.c:15
<a id="__codelineno-33-19" name="__codelineno-33-19" href="#__codelineno-33-19"></a>15          dir = opendir(&quot;/dev/input&quot;);
<a id="__codelineno-33-20" name="__codelineno-33-20" href="#__codelineno-33-20"></a>
<a id="__codelineno-33-21" name="__codelineno-33-21" href="#__codelineno-33-21"></a>(gdb) print device_path
<a id="__codelineno-33-22" name="__codelineno-33-22" href="#__codelineno-33-22"></a>$1 = &quot;&quot;
<a id="__codelineno-33-23" name="__codelineno-33-23" href="#__codelineno-33-23"></a>
<a id="__codelineno-33-24" name="__codelineno-33-24" href="#__codelineno-33-24"></a>(gdb) continue
<a id="__codelineno-33-25" name="__codelineno-33-25" href="#__codelineno-33-25"></a>Continuing.
</code></pre></div>
<p><strong>Common gdb Commands:</strong></p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>break &lt;function&gt;</code></td>
<td>Set breakpoint</td>
</tr>
<tr>
<td><code>break &lt;file&gt;:&lt;line&gt;</code></td>
<td>Set breakpoint at line</td>
</tr>
<tr>
<td><code>continue</code></td>
<td>Resume execution</td>
</tr>
<tr>
<td><code>next</code></td>
<td>Step over (next line)</td>
</tr>
<tr>
<td><code>step</code></td>
<td>Step into function</td>
</tr>
<tr>
<td><code>print &lt;var&gt;</code></td>
<td>Print variable value</td>
</tr>
<tr>
<td><code>backtrace</code></td>
<td>Show call stack</td>
</tr>
<tr>
<td><code>info locals</code></td>
<td>Show local variables</td>
</tr>
<tr>
<td><code>quit</code></td>
<td>Exit gdb</td>
</tr>
</tbody>
</table>
<p><strong>Verification Checklist:</strong></p>
<ul>
<li>[ ] gdb and gdbserver added to Buildroot</li>
<li>[ ] Cross-gdb available on workstation</li>
<li>[ ] Application compiled with <code>-g</code> flag</li>
<li>[ ] gdbserver started on target</li>
<li>[ ] Connected from host gdb</li>
<li>[ ] Set breakpoints and stepped through code</li>
</ul>
<h2 id="section-6-visual-studio-code-remote-debugging">Section 6: Visual Studio Code Remote Debugging<a class="headerlink" href="#section-6-visual-studio-code-remote-debugging" title="Permanent link">&para;</a></h2>
<h3 id="install-vs-code-extensions">Install VS Code Extensions<a class="headerlink" href="#install-vs-code-extensions" title="Permanent link">&para;</a></h3>
<p>On your workstation:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>code<span class="w"> </span>--install-extension<span class="w"> </span>ms-vscode.cpptools
</code></pre></div>
<h3 id="prepare-target-for-vs-code-debugging">Prepare Target for VS Code Debugging<a class="headerlink" href="#prepare-target-for-vs-code-debugging" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="c1"># On BeaglePlay</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="c1"># Start gdbserver in multi mode (persistent)</span>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>gdbserver<span class="w"> </span>--multi<span class="w"> </span>:3333
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a>
<a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="c1"># This allows VS Code to launch and attach to programs</span>
</code></pre></div>
<h3 id="create-vs-code-configuration">Create VS Code Configuration<a class="headerlink" href="#create-vs-code-configuration" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/embedded-linux-beagleplay-labs/appdev
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>mkdir<span class="w"> </span>-p<span class="w"> </span>.vscode
</code></pre></div>
<p><strong>Create .vscode/launch.json:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="p">{</span>
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0.2.0&quot;</span><span class="p">,</span>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="w">    </span><span class="nt">&quot;configurations&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a><span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Debug on BeaglePlay&quot;</span><span class="p">,</span>
<a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a><span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cppdbg&quot;</span><span class="p">,</span>
<a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a><span class="w">            </span><span class="nt">&quot;request&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;launch&quot;</span><span class="p">,</span>
<a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a><span class="w">            </span><span class="nt">&quot;program&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/root/nunchuk-mpd-client-debug&quot;</span><span class="p">,</span>
<a id="__codelineno-37-9" name="__codelineno-37-9" href="#__codelineno-37-9"></a><span class="w">            </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<a id="__codelineno-37-10" name="__codelineno-37-10" href="#__codelineno-37-10"></a><span class="w">            </span><span class="nt">&quot;stopAtEntry&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<a id="__codelineno-37-11" name="__codelineno-37-11" href="#__codelineno-37-11"></a><span class="w">            </span><span class="nt">&quot;cwd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/root&quot;</span><span class="p">,</span>
<a id="__codelineno-37-12" name="__codelineno-37-12" href="#__codelineno-37-12"></a><span class="w">            </span><span class="nt">&quot;environment&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<a id="__codelineno-37-13" name="__codelineno-37-13" href="#__codelineno-37-13"></a><span class="w">            </span><span class="nt">&quot;externalConsole&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<a id="__codelineno-37-14" name="__codelineno-37-14" href="#__codelineno-37-14"></a><span class="w">            </span><span class="nt">&quot;MIMode&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gdb&quot;</span><span class="p">,</span>
<a id="__codelineno-37-15" name="__codelineno-37-15" href="#__codelineno-37-15"></a><span class="w">            </span><span class="nt">&quot;miDebuggerPath&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/home/&lt;user&gt;/x-tools/aarch64-beagleplay-linux-musl/bin/aarch64-beagleplay-linux-musl-gdb&quot;</span><span class="p">,</span>
<a id="__codelineno-37-16" name="__codelineno-37-16" href="#__codelineno-37-16"></a><span class="w">            </span><span class="nt">&quot;miDebuggerServerAddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;192.168.0.100:3333&quot;</span><span class="p">,</span>
<a id="__codelineno-37-17" name="__codelineno-37-17" href="#__codelineno-37-17"></a><span class="w">            </span><span class="nt">&quot;setupCommands&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-37-18" name="__codelineno-37-18" href="#__codelineno-37-18"></a><span class="w">                </span><span class="p">{</span>
<a id="__codelineno-37-19" name="__codelineno-37-19" href="#__codelineno-37-19"></a><span class="w">                    </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Enable pretty-printing&quot;</span><span class="p">,</span>
<a id="__codelineno-37-20" name="__codelineno-37-20" href="#__codelineno-37-20"></a><span class="w">                    </span><span class="nt">&quot;text&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;-enable-pretty-printing&quot;</span><span class="p">,</span>
<a id="__codelineno-37-21" name="__codelineno-37-21" href="#__codelineno-37-21"></a><span class="w">                    </span><span class="nt">&quot;ignoreFailures&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<a id="__codelineno-37-22" name="__codelineno-37-22" href="#__codelineno-37-22"></a><span class="w">                </span><span class="p">},</span>
<a id="__codelineno-37-23" name="__codelineno-37-23" href="#__codelineno-37-23"></a><span class="w">                </span><span class="p">{</span>
<a id="__codelineno-37-24" name="__codelineno-37-24" href="#__codelineno-37-24"></a><span class="w">                    </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Set sysroot&quot;</span><span class="p">,</span>
<a id="__codelineno-37-25" name="__codelineno-37-25" href="#__codelineno-37-25"></a><span class="w">                    </span><span class="nt">&quot;text&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;set sysroot /home/&lt;user&gt;/embedded-linux-beagleplay-labs/buildroot-lab/buildroot/output/staging&quot;</span>
<a id="__codelineno-37-26" name="__codelineno-37-26" href="#__codelineno-37-26"></a><span class="w">                </span><span class="p">}</span>
<a id="__codelineno-37-27" name="__codelineno-37-27" href="#__codelineno-37-27"></a><span class="w">            </span><span class="p">],</span>
<a id="__codelineno-37-28" name="__codelineno-37-28" href="#__codelineno-37-28"></a><span class="w">            </span><span class="nt">&quot;preLaunchTask&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;upload&quot;</span><span class="p">,</span>
<a id="__codelineno-37-29" name="__codelineno-37-29" href="#__codelineno-37-29"></a><span class="w">            </span><span class="nt">&quot;logging&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-30" name="__codelineno-37-30" href="#__codelineno-37-30"></a><span class="w">                </span><span class="nt">&quot;moduleLoad&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<a id="__codelineno-37-31" name="__codelineno-37-31" href="#__codelineno-37-31"></a><span class="w">                </span><span class="nt">&quot;trace&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<a id="__codelineno-37-32" name="__codelineno-37-32" href="#__codelineno-37-32"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-37-33" name="__codelineno-37-33" href="#__codelineno-37-33"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-37-34" name="__codelineno-37-34" href="#__codelineno-37-34"></a><span class="w">    </span><span class="p">]</span>
<a id="__codelineno-37-35" name="__codelineno-37-35" href="#__codelineno-37-35"></a><span class="p">}</span>
</code></pre></div>
<p><strong>Create .vscode/tasks.json:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="p">{</span>
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2.0.0&quot;</span><span class="p">,</span>
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="w">    </span><span class="nt">&quot;tasks&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a><span class="w">            </span><span class="nt">&quot;label&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;build&quot;</span><span class="p">,</span>
<a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a><span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;shell&quot;</span><span class="p">,</span>
<a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a><span class="w">            </span><span class="nt">&quot;command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;aarch64-beagleplay-linux-musl-gcc&quot;</span><span class="p">,</span>
<a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a><span class="w">            </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a><span class="w">                </span><span class="s2">&quot;-g&quot;</span><span class="p">,</span>
<a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a><span class="w">                </span><span class="s2">&quot;-o&quot;</span><span class="p">,</span>
<a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a><span class="w">                </span><span class="s2">&quot;nunchuk-mpd-client-debug&quot;</span><span class="p">,</span>
<a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a><span class="w">                </span><span class="s2">&quot;nunchuk-mpd-client.c&quot;</span><span class="p">,</span>
<a id="__codelineno-38-13" name="__codelineno-38-13" href="#__codelineno-38-13"></a><span class="w">                </span><span class="s2">&quot;$(PKG_CONFIG_LIBDIR=/home/&lt;user&gt;/embedded-linux-beagleplay-labs/buildroot-lab/buildroot/output/staging/usr/lib/pkgconfig pkg-config --cflags --libs libmpdclient)&quot;</span>
<a id="__codelineno-38-14" name="__codelineno-38-14" href="#__codelineno-38-14"></a><span class="w">            </span><span class="p">],</span>
<a id="__codelineno-38-15" name="__codelineno-38-15" href="#__codelineno-38-15"></a><span class="w">            </span><span class="nt">&quot;group&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-38-16" name="__codelineno-38-16" href="#__codelineno-38-16"></a><span class="w">                </span><span class="nt">&quot;kind&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;build&quot;</span><span class="p">,</span>
<a id="__codelineno-38-17" name="__codelineno-38-17" href="#__codelineno-38-17"></a><span class="w">                </span><span class="nt">&quot;isDefault&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<a id="__codelineno-38-18" name="__codelineno-38-18" href="#__codelineno-38-18"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-38-19" name="__codelineno-38-19" href="#__codelineno-38-19"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-38-20" name="__codelineno-38-20" href="#__codelineno-38-20"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-38-21" name="__codelineno-38-21" href="#__codelineno-38-21"></a><span class="w">            </span><span class="nt">&quot;label&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;upload&quot;</span><span class="p">,</span>
<a id="__codelineno-38-22" name="__codelineno-38-22" href="#__codelineno-38-22"></a><span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;shell&quot;</span><span class="p">,</span>
<a id="__codelineno-38-23" name="__codelineno-38-23" href="#__codelineno-38-23"></a><span class="w">            </span><span class="nt">&quot;command&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cp&quot;</span><span class="p">,</span>
<a id="__codelineno-38-24" name="__codelineno-38-24" href="#__codelineno-38-24"></a><span class="w">            </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-38-25" name="__codelineno-38-25" href="#__codelineno-38-25"></a><span class="w">                </span><span class="s2">&quot;nunchuk-mpd-client-debug&quot;</span><span class="p">,</span>
<a id="__codelineno-38-26" name="__codelineno-38-26" href="#__codelineno-38-26"></a><span class="w">                </span><span class="s2">&quot;/home/&lt;user&gt;/embedded-linux-beagleplay-labs/buildroot-lab/nfsroot/root/&quot;</span>
<a id="__codelineno-38-27" name="__codelineno-38-27" href="#__codelineno-38-27"></a><span class="w">            </span><span class="p">],</span>
<a id="__codelineno-38-28" name="__codelineno-38-28" href="#__codelineno-38-28"></a><span class="w">            </span><span class="nt">&quot;dependsOn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;build&quot;</span>
<a id="__codelineno-38-29" name="__codelineno-38-29" href="#__codelineno-38-29"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-38-30" name="__codelineno-38-30" href="#__codelineno-38-30"></a><span class="w">    </span><span class="p">]</span>
<a id="__codelineno-38-31" name="__codelineno-38-31" href="#__codelineno-38-31"></a><span class="p">}</span>
</code></pre></div>
<h3 id="debug-in-vs-code">Debug in VS Code<a class="headerlink" href="#debug-in-vs-code" title="Permanent link">&para;</a></h3>
<ol>
<li>Open <code>appdev</code> folder in VS Code:</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>code<span class="w"> </span><span class="nv">$HOME</span>/embedded-linux-beagleplay-labs/appdev
</code></pre></div>
<ol>
<li>
<p>Open <code>nunchuk-mpd-client.c</code></p>
</li>
<li>
<p>Set breakpoint (click left of line number)</p>
</li>
<li>
<p>Press <code>F5</code> or <strong>Run  Start Debugging</strong></p>
</li>
<li>
<p>VS Code will:</p>
</li>
<li>Build the application</li>
<li>Upload to target</li>
<li>Start debugging session</li>
<li>
<p>Break at your breakpoint</p>
</li>
<li>
<p>Use debugging controls:</p>
</li>
<li>Continue (F5)</li>
<li>Step Over (F10)</li>
<li>Step Into (F11)</li>
<li>View variables in sidebar</li>
<li>Watch expressions</li>
</ol>
<p><strong>Verification Checklist:</strong></p>
<ul>
<li>[ ] VS Code C/C++ extension installed</li>
<li>[ ] gdbserver running in multi mode on target</li>
<li>[ ] VS Code launch.json and tasks.json created</li>
<li>[ ] Successfully debugged application from VS Code</li>
<li>[ ] Set breakpoints and inspected variables</li>
</ul>
<h2 id="section-7-post-mortem-analysis-with-core-dumps">Section 7: Post-Mortem Analysis with Core Dumps<a class="headerlink" href="#section-7-post-mortem-analysis-with-core-dumps" title="Permanent link">&para;</a></h2>
<h3 id="enable-core-dumps">Enable Core Dumps<a class="headerlink" href="#enable-core-dumps" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="c1"># On BeaglePlay</span>
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a>
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="c1"># Set core file pattern</span>
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;/tmp/core.%p&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/proc/sys/kernel/core_pattern
<a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a>
<a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a><span class="c1"># Remove core file size limit</span>
<a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a><span class="nb">ulimit</span><span class="w"> </span>-c<span class="w"> </span>unlimited
</code></pre></div>
<h3 id="introduce-a-crash">Introduce a Crash<a class="headerlink" href="#introduce-a-crash" title="Permanent link">&para;</a></h3>
<p>Modify the application to crash:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="cm">/* In main(), after successful operations */</span>
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">bad_ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="o">*</span><span class="n">bad_ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;X&#39;</span><span class="p">;</span><span class="w">  </span><span class="cm">/* Deliberate NULL pointer dereference */</span>
</code></pre></div>
<p>Recompile, deploy, and run.</p>
<h3 id="collect-core-dump">Collect Core Dump<a class="headerlink" href="#collect-core-dump" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="c1"># On BeaglePlay</span>
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>/root/nunchuk-mpd-client-debug
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="c1"># After crash:</span>
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a>ls<span class="w"> </span>-l<span class="w"> </span>/tmp/core.*
<a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a>
<a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a><span class="c1"># core.1234 (where 1234 is the PID)</span>
</code></pre></div>
<h3 id="analyze-core-dump">Analyze Core Dump<a class="headerlink" href="#analyze-core-dump" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="c1"># Copy core dump to workstation (via NFS or scp)</span>
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>cp<span class="w"> </span>/tmp/core.1234<span class="w"> </span>/tmp/
<a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a>
<a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a><span class="c1"># On workstation</span>
<a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/embedded-linux-beagleplay-labs/appdev
<a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a>
<a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a>aarch64-beagleplay-linux-musl-gdb<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a><span class="w">    </span>nunchuk-mpd-client-debug<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a><span class="w">    </span>/tmp/core.1234
</code></pre></div>
<p><strong>In gdb:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>(gdb) set sysroot /home/&lt;user&gt;/embedded-linux-beagleplay-labs/buildroot-lab/buildroot/output/staging
<a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>
<a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a>(gdb) backtrace
<a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a>#0  0x0000aaaaaaaabc12 in main () at nunchuk-mpd-client.c:123
<a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a>#1  0x0000fffff7e12abc in __libc_start_main () from /lib/libc.so.6
<a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a>#2  0x0000aaaaaaaab890 in _start ()
<a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a>
<a id="__codelineno-44-8" name="__codelineno-44-8" href="#__codelineno-44-8"></a>(gdb) frame 0
<a id="__codelineno-44-9" name="__codelineno-44-9" href="#__codelineno-44-9"></a>#0  0x0000aaaaaaaabc12 in main () at nunchuk-mpd-client.c:123
<a id="__codelineno-44-10" name="__codelineno-44-10" href="#__codelineno-44-10"></a>123         *bad_ptr = &#39;X&#39;;  /* Crash here! */
<a id="__codelineno-44-11" name="__codelineno-44-11" href="#__codelineno-44-11"></a>
<a id="__codelineno-44-12" name="__codelineno-44-12" href="#__codelineno-44-12"></a>(gdb) print bad_ptr
<a id="__codelineno-44-13" name="__codelineno-44-13" href="#__codelineno-44-13"></a>$1 = 0x0 &lt;null&gt;
<a id="__codelineno-44-14" name="__codelineno-44-14" href="#__codelineno-44-14"></a>
<a id="__codelineno-44-15" name="__codelineno-44-15" href="#__codelineno-44-15"></a>(gdb) info locals
<a id="__codelineno-44-16" name="__codelineno-44-16" href="#__codelineno-44-16"></a># Shows all local variables at crash time
<a id="__codelineno-44-17" name="__codelineno-44-17" href="#__codelineno-44-17"></a>
<a id="__codelineno-44-18" name="__codelineno-44-18" href="#__codelineno-44-18"></a>(gdb) bt full
<a id="__codelineno-44-19" name="__codelineno-44-19" href="#__codelineno-44-19"></a># Full backtrace with all variables in all frames
</code></pre></div>
<p>This shows exactly where and why the crash occurred, without running the program!</p>
<p><strong>Verification Checklist:</strong></p>
<ul>
<li>[ ] Core dumps enabled on target</li>
<li>[ ] Crashed application generated core dump</li>
<li>[ ] Core dump analyzed with gdb on workstation</li>
<li>[ ] Identified crash location and cause</li>
</ul>
<h2 id="section-8-system-profiling-with-perf">Section 8: System Profiling with perf<a class="headerlink" href="#section-8-system-profiling-with-perf" title="Permanent link">&para;</a></h2>
<h3 id="add-perf-to-buildroot">Add perf to Buildroot<a class="headerlink" href="#add-perf-to-buildroot" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$HOME</span>/embedded-linux-beagleplay-labs/buildroot-lab/buildroot
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>
<a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>make<span class="w"> </span>menuconfig
</code></pre></div>
<p><strong>Enable perf:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>Kernel ---&gt;
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a>    Linux Kernel Tools ---&gt;
<a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a>        [*] perf
</code></pre></div>
<p>Rebuild and update.</p>
<h3 id="profile-application">Profile Application<a class="headerlink" href="#profile-application" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="c1"># On BeaglePlay</span>
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>
<a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a><span class="c1"># Record application activity</span>
<a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a>perf<span class="w"> </span>record<span class="w"> </span>-g<span class="w"> </span>/root/nunchuk-mpd-client-debug
<a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a>
<a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a><span class="c1"># Use Nunchuk for 30 seconds, then quit (C button)</span>
<a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a>
<a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a><span class="c1"># View report</span>
<a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a>perf<span class="w"> </span>report
</code></pre></div>
<p><strong>Expected Output:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>Samples: 1K of event &#39;cycles:u&#39;, Event count (approx.): 123456789
<a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a>  Overhead  Command   Shared Object      Symbol
<a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a>+   42.15%  nunchuk   libc.so.6          [.] read
<a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a>+   18.32%  nunchuk   libmpdclient.so.2  [.] mpd_run_status
<a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a>+   12.45%  nunchuk   nunchuk-mpd-client [.] main
<a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a>+    8.21%  nunchuk   libc.so.6          [.] recv
<a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a>...
</code></pre></div>
<p><strong>Interpretation:</strong></p>
<ul>
<li>42% of time spent in <code>read()</code> (waiting for Nunchuk events)</li>
<li>18% in MPD library calls</li>
<li>12% in our main loop</li>
</ul>
<h3 id="system-wide-profiling">System-Wide Profiling<a class="headerlink" href="#system-wide-profiling" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="c1"># On BeaglePlay</span>
<a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a>
<a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a><span class="c1"># Ensure music is playing</span>
<a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a>mpc<span class="w"> </span>play
<a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a>
<a id="__codelineno-49-6" name="__codelineno-49-6" href="#__codelineno-49-6"></a><span class="c1"># Profile entire system for 30 seconds</span>
<a id="__codelineno-49-7" name="__codelineno-49-7" href="#__codelineno-49-7"></a>perf<span class="w"> </span>record<span class="w"> </span>-a<span class="w"> </span>-g<span class="w"> </span>sleep<span class="w"> </span><span class="m">30</span>
<a id="__codelineno-49-8" name="__codelineno-49-8" href="#__codelineno-49-8"></a>
<a id="__codelineno-49-9" name="__codelineno-49-9" href="#__codelineno-49-9"></a><span class="c1"># Generate report</span>
<a id="__codelineno-49-10" name="__codelineno-49-10" href="#__codelineno-49-10"></a>perf<span class="w"> </span>report
<a id="__codelineno-49-11" name="__codelineno-49-11" href="#__codelineno-49-11"></a>
<a id="__codelineno-49-12" name="__codelineno-49-12" href="#__codelineno-49-12"></a><span class="c1"># Shows kernel and userspace activity</span>
<a id="__codelineno-49-13" name="__codelineno-49-13" href="#__codelineno-49-13"></a><span class="c1"># Press Enter on symbols to see caller graphs</span>
</code></pre></div>
<h3 id="live-profiling">Live Profiling<a class="headerlink" href="#live-profiling" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="c1"># On BeaglePlay (via SSH for better display)</span>
<a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a>
<a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a><span class="c1"># Real-time top-like profiler</span>
<a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a>perf<span class="w"> </span>top
<a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a>
<a id="__codelineno-50-6" name="__codelineno-50-6" href="#__codelineno-50-6"></a><span class="c1"># Shows live CPU usage by function</span>
<a id="__codelineno-50-7" name="__codelineno-50-7" href="#__codelineno-50-7"></a><span class="c1"># Useful for finding hot spots</span>
</code></pre></div>
<p><strong>Verification Checklist:</strong></p>
<ul>
<li>[ ] perf compiled and installed via Buildroot</li>
<li>[ ] Application profiled with <code>perf record</code></li>
<li>[ ] Profile viewed with <code>perf report</code></li>
<li>[ ] System-wide profiling performed</li>
<li>[ ] Understood CPU time distribution</li>
</ul>
<h2 id="troubleshooting-guide">Troubleshooting Guide<a class="headerlink" href="#troubleshooting-guide" title="Permanent link">&para;</a></h2>
<h3 id="problem-pkg-config-cant-find-libmpdclient">Problem: pkg-config can't find libmpdclient<a class="headerlink" href="#problem-pkg-config-cant-find-libmpdclient" title="Permanent link">&para;</a></h3>
<p><strong>Error:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>Package libmpdclient was not found in the pkg-config search path
</code></pre></div>
<p><strong>Solution:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="nb">export</span><span class="w"> </span><span class="nv">PKG_CONFIG_LIBDIR</span><span class="o">=</span><span class="nv">$HOME</span>/embedded-linux-beagleplay-labs/buildroot-lab/buildroot/output/staging/usr/lib/pkgconfig
<a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a><span class="nb">export</span><span class="w"> </span><span class="nv">PKG_CONFIG_SYSROOT_DIR</span><span class="o">=</span><span class="nv">$HOME</span>/embedded-linux-beagleplay-labs/buildroot-lab/buildroot/output/staging
<a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a>
<a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a><span class="c1"># Verify</span>
<a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a>pkg-config<span class="w"> </span>--libs<span class="w"> </span>libmpdclient
</code></pre></div>
<h3 id="problem-gdb-cant-find-libraries">Problem: gdb can't find libraries<a class="headerlink" href="#problem-gdb-cant-find-libraries" title="Permanent link">&para;</a></h3>
<p><strong>Symptoms:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>(gdb) continue
<a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a>warning: Could not load shared library symbols for libmpdclient.so.2.
</code></pre></div>
<p><strong>Solution:</strong></p>
<p>Set sysroot in gdb:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a>(gdb) set sysroot /home/&lt;user&gt;/embedded-linux-beagleplay-labs/buildroot-lab/buildroot/output/staging
</code></pre></div>
<h3 id="problem-gdbserver-connection-refused">Problem: gdbserver connection refused<a class="headerlink" href="#problem-gdbserver-connection-refused" title="Permanent link">&para;</a></h3>
<p><strong>Error:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a>192.168.0.100:2345: Connection refused.
</code></pre></div>
<p><strong>Solutions:</strong></p>
<ol>
<li><strong>gdbserver not running on target:</strong></li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="c1"># On BeaglePlay</span>
<a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a>gdbserver<span class="w"> </span>:2345<span class="w"> </span>/root/nunchuk-mpd-client-debug
</code></pre></div>
<ol>
<li><strong>Firewall blocking port:</strong></li>
</ol>
<p>Disable firewall on target or open port 2345.</p>
<ol>
<li><strong>Wrong IP address:</strong></li>
</ol>
<p>Verify target IP:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="c1"># On BeaglePlay</span>
<a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a>ip<span class="w"> </span>addr<span class="w"> </span>show<span class="w"> </span>eth0
</code></pre></div>
<h3 id="problem-segmentation-fault-without-useful-info">Problem: Segmentation fault without useful info<a class="headerlink" href="#problem-segmentation-fault-without-useful-info" title="Permanent link">&para;</a></h3>
<p><strong>Symptoms:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a>Program received signal SIGSEGV, Segmentation fault.
<a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a>0x0000fffff7fc1234 in ?? ()
</code></pre></div>
<p><strong>Cause:</strong> Application not compiled with debug symbols.</p>
<p><strong>Solution:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="c1"># Recompile with -g</span>
<a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a>aarch64-beagleplay-linux-musl-gcc<span class="w"> </span>-g<span class="w"> </span>-o<span class="w"> </span>app<span class="w"> </span>app.c<span class="w"> </span><span class="k">$(</span>pkg-config<span class="w"> </span>--cflags<span class="w"> </span>--libs<span class="w"> </span>libmpdclient<span class="k">)</span>
</code></pre></div>
<h3 id="problem-perf-record-permission-denied">Problem: perf record permission denied<a class="headerlink" href="#problem-perf-record-permission-denied" title="Permanent link">&para;</a></h3>
<p><strong>Error:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a>perf_event_open(..., PERF_FLAG_FD_CLOEXEC) failed with unexpected error 1 (Operation not permitted)
</code></pre></div>
<p><strong>Solution:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="c1"># On BeaglePlay</span>
<a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a><span class="nb">echo</span><span class="w"> </span>-1<span class="w"> </span>&gt;<span class="w"> </span>/proc/sys/kernel/perf_event_paranoid
</code></pre></div>
<p>Or run as root.</p>
<h2 id="advanced-challenges">Advanced Challenges<a class="headerlink" href="#advanced-challenges" title="Permanent link">&para;</a></h2>
<h3 id="challenge-1-add-logging-infrastructure">Challenge 1: Add Logging Infrastructure<a class="headerlink" href="#challenge-1-add-logging-infrastructure" title="Permanent link">&para;</a></h3>
<p>Implement syslog-based logging for the application.</p>
<p><strong>Requirements:</strong>
- Log MPD commands to syslog
- Different log levels (debug, info, error)
- Use <code>syslog()</code> from libc</p>
<h3 id="challenge-2-implement-signal-handling">Challenge 2: Implement Signal Handling<a class="headerlink" href="#challenge-2-implement-signal-handling" title="Permanent link">&para;</a></h3>
<p>Add graceful shutdown on SIGINT (Ctrl+C).</p>
<p><strong>Hint:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;signal.h&gt;</span>
<a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a>
<a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a><span class="k">volatile</span><span class="w"> </span><span class="kt">sig_atomic_t</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-62-4" name="__codelineno-62-4" href="#__codelineno-62-4"></a>
<a id="__codelineno-62-5" name="__codelineno-62-5" href="#__codelineno-62-5"></a><span class="kt">void</span><span class="w"> </span><span class="nf">signal_handler</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">signum</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-6" name="__codelineno-62-6" href="#__codelineno-62-6"></a><span class="w">    </span><span class="n">running</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-62-7" name="__codelineno-62-7" href="#__codelineno-62-7"></a><span class="p">}</span>
<a id="__codelineno-62-8" name="__codelineno-62-8" href="#__codelineno-62-8"></a>
<a id="__codelineno-62-9" name="__codelineno-62-9" href="#__codelineno-62-9"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-10" name="__codelineno-62-10" href="#__codelineno-62-10"></a><span class="w">    </span><span class="n">signal</span><span class="p">(</span><span class="n">SIGINT</span><span class="p">,</span><span class="w"> </span><span class="n">signal_handler</span><span class="p">);</span>
<a id="__codelineno-62-11" name="__codelineno-62-11" href="#__codelineno-62-11"></a>
<a id="__codelineno-62-12" name="__codelineno-62-12" href="#__codelineno-62-12"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">running</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-62-13" name="__codelineno-62-13" href="#__codelineno-62-13"></a><span class="w">        </span><span class="cm">/* Main loop */</span>
<a id="__codelineno-62-14" name="__codelineno-62-14" href="#__codelineno-62-14"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-62-15" name="__codelineno-62-15" href="#__codelineno-62-15"></a>
<a id="__codelineno-62-16" name="__codelineno-62-16" href="#__codelineno-62-16"></a><span class="w">    </span><span class="cm">/* Cleanup */</span>
<a id="__codelineno-62-17" name="__codelineno-62-17" href="#__codelineno-62-17"></a><span class="p">}</span>
</code></pre></div>
<h3 id="challenge-3-memory-leak-detection-with-valgrind">Challenge 3: Memory Leak Detection with Valgrind<a class="headerlink" href="#challenge-3-memory-leak-detection-with-valgrind" title="Permanent link">&para;</a></h3>
<p>Add Valgrind to Buildroot and detect memory leaks.</p>
<p><strong>Enable in Buildroot:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a>Target packages ---&gt;
<a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a>    Debugging, profiling and benchmark ---&gt;
<a id="__codelineno-63-3" name="__codelineno-63-3" href="#__codelineno-63-3"></a>        [*] valgrind
</code></pre></div>
<p><strong>Run:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a>valgrind<span class="w"> </span>--leak-check<span class="o">=</span>full<span class="w"> </span>/root/nunchuk-mpd-client
</code></pre></div>
<h3 id="challenge-4-create-buildroot-package">Challenge 4: Create Buildroot Package<a class="headerlink" href="#challenge-4-create-buildroot-package" title="Permanent link">&para;</a></h3>
<p>Integrate the Nunchuk MPD client as a Buildroot package.</p>
<p><strong>Structure:</strong>
- <code>package/nunchuk-mpd-client/Config.in</code>
- <code>package/nunchuk-mpd-client/nunchuk-mpd-client.mk</code>
- Use <code>$(eval $(cmake-package))</code> or custom Makefile</p>
<h3 id="challenge-5-implement-auto-restart-with-systemd">Challenge 5: Implement Auto-Restart with systemd<a class="headerlink" href="#challenge-5-implement-auto-restart-with-systemd" title="Permanent link">&para;</a></h3>
<p>If using systemd (requires glibc Buildroot config), create a service unit to auto-restart the client on crash.</p>
<h2 id="what-youve-learned">What You've Learned<a class="headerlink" href="#what-youve-learned" title="Permanent link">&para;</a></h2>
<p>By completing this lab, you've mastered:</p>
<p> <strong>Cross-Compilation:</strong>
- Used pkg-config for library dependency management
- Cross-compiled applications for ARM64
- Managed library paths with <code>PKG_CONFIG_LIBDIR</code> and <code>PKG_CONFIG_SYSROOT_DIR</code>
- Deployed to target via NFS</p>
<p> <strong>Application Development:</strong>
- Implemented real-world embedded application
- Used third-party libraries (libmpdclient)
- Integrated with hardware (Nunchuk input device)
- Controlled services (MPD playback)</p>
<p> <strong>System Call Debugging:</strong>
- Used strace to trace system calls
- Diagnosed file access, network, and permission issues
- Understood kernel-userspace interaction</p>
<p> <strong>Library Call Debugging:</strong>
- Used ltrace to trace library function calls
- Debugged library usage and sequence issues
- Identified use-after-free and API misuse</p>
<p> <strong>Remote Debugging:</strong>
- Set up gdbserver on embedded target
- Connected from host gdb
- Set breakpoints, stepped through code, inspected variables
- Used cross-gdb with sysroot configuration</p>
<p> <strong>IDE Integration:</strong>
- Configured Visual Studio Code for embedded debugging
- Created launch and task configurations
- Debugged visually with breakpoints and variable inspection</p>
<p> <strong>Post-Mortem Analysis:</strong>
- Enabled core dump generation
- Analyzed crashes without reproducing
- Extracted crash location and variable states from core files</p>
<p> <strong>Performance Profiling:</strong>
- Used perf for application profiling
- Performed system-wide profiling
- Identified performance hotspots
- Understood CPU time distribution</p>
<p> <strong>Best Practices:</strong>
- Separate debug and release builds
- Strip production binaries
- Keep debug symbols on development host
- Use appropriate tools for different debugging scenarios</p>
<h2 id="going-further">Going Further<a class="headerlink" href="#going-further" title="Permanent link">&para;</a></h2>
<h3 id="recommended-reading">Recommended Reading<a class="headerlink" href="#recommended-reading" title="Permanent link">&para;</a></h3>
<p><strong>Books:</strong>
- <em>Advanced Linux Programming</em> - Library usage, debugging
- <em>Linux System Programming</em> - System calls, I/O, signals
- <em>The Art of Debugging with GDB, DDD, and Eclipse</em></p>
<p><strong>Online Resources:</strong>
- GDB manual: https://sourceware.org/gdb/documentation/
- perf wiki: https://perf.wiki.kernel.org/
- Brendan Gregg's performance tools: http://www.brendangregg.com/</p>
<h3 id="next-steps">Next Steps<a class="headerlink" href="#next-steps" title="Permanent link">&para;</a></h3>
<p><strong>Continue to Yocto Labs:</strong>
- Lab 10: Yocto Project introduction and environment setup
- Lab 11: Writing custom Yocto layers and recipes
- Lab 12: Image customization and deployment
- Lab 13: SDK generation and application development workflow</p>
<p><strong>Or explore Linux Debugging track:</strong>
- Lab 14: Kernel debugging techniques
- Lab 15: Kernel crash analysis and oops interpretation
- Lab 16: Tracing with ftrace and trace-cmd
- Lab 17: Dynamic debugging and printk</p>
<hr />
<p><strong>Estimated Completion Time:</strong> 5-6 hours</p>
<p><strong>Difficulty:</strong>  (Advanced)</p>
<p><strong>Prerequisites Met:</strong>  Lab 8 (Buildroot)</p>
<p><strong>Leads to:</strong> Yocto Labs (10-13) or Debugging Labs (14-17)</p>
<p><strong>Congratulations!</strong> You've completed all 9 Embedded Linux labs and built a complete embedded system from scratch!</p>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="January 30, 2026 15:44:01 UTC">January 30, 2026</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="January 30, 2026 15:44:01 UTC">January 30, 2026</span>
  </span>

    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Jofralso. Licensed under MIT.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Jofralso" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="https://buymeacoffee.com/jofralso" target="_blank" rel="noopener" title="Buy Me A Coffee" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M152-16c-13.3 0-24 10.7-24 24 0 38.9 23.4 59.4 39.1 73.1l1.1 1C184.5 96.4 192 103.9 192 120c0 13.3 10.7 24 24 24s24-10.7 24-24c0-38.9-23.4-59.4-39.1-73.1l-1.1-1C183.5 31.7 176 24.1 176 8c0-13.3-10.7-24-24-24M96 192c-17.7 0-32 14.3-32 32v192c0 53 43 96 96 96h192c41.8 0 77.4-26.7 90.5-64h5.5c70.7 0 128-57.3 128-128s-57.3-128-128-128zm352 192V256c35.3 0 64 28.7 64 64s-28.7 64-64 64M288 8c0-13.3-10.7-24-24-24S240-5.3 240 8c0 38.9 23.4 59.4 39.1 73.1l1.1 1C296.5 96.4 304 103.9 304 120c0 13.3 10.7 24 24 24s24-10.7 24-24c0-38.9-23.4-59.4-39.1-73.1l-1.1-1C295.5 31.7 288 24.1 288 8"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>